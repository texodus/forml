<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Formal</title>
    <script type='text/javascript' src='lib/js/jquery.js'></script>
    <script type='text/javascript' src='lib/js/prettify.js'></script>
    <script type='text/javascript' src='lib/js/lang-hs.js'></script>

    <link rel='stylesheet' type='text/css' href='lib/js/jasmine-1.0.1/jasmine.css'>
    <link href='lib/js/prettify.css' type='text/css' rel='stylesheet' />

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Formal</h1>
        <p></p>
        <p class="view"><a href="https://github.com/texodus/formal">View the Project on GitHub <small>texodus/formal</small></a></p>
        <ul>
          <li><a href="https://github.com/texodus/formal/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/texodus/formal/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/texodus/formal">View On <strong>GitHub</strong></a></li>
          <li><a href="#" id="run_tests">Run<strong>Tests</strong></a></li>

        </ul>
      </header>
      <section>

    <div class="container">
     <div class="twelve columns offset-by-one content">
<script>var jasmine={unimplementedMethod_:function(){throw Error("unimplemented method");}};jasmine.undefined=jasmine.___undefined___;jasmine.DEFAULT_UPDATE_INTERVAL=250;jasmine.DEFAULT_TIMEOUT_INTERVAL=5E3;jasmine.getGlobal=function(){return function(){return this}()};jasmine.bindOriginal_=function(a,b){var c=a[b];return c.apply?function(){return c.apply(a,arguments)}:jasmine.getGlobal()[b]};jasmine.setTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"setTimeout");
jasmine.clearTimeout=jasmine.bindOriginal_(jasmine.getGlobal(),"clearTimeout");jasmine.setInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"setInterval");jasmine.clearInterval=jasmine.bindOriginal_(jasmine.getGlobal(),"clearInterval");jasmine.MessageResult=function(a){this.type="log";this.values=a;this.trace=Error()};
jasmine.MessageResult.prototype.toString=function(){for(var a="",b=0;b<this.values.length;b++)0<b&&(a+=" "),a=jasmine.isString_(this.values[b])?a+this.values[b]:a+jasmine.pp(this.values[b]);return a};jasmine.ExpectationResult=function(a){this.type="expect";this.matcherName=a.matcherName;this.passed_=a.passed;this.expected=a.expected;this.actual=a.actual;this.message=this.passed_?"Passed.":a.message;this.trace=this.passed_?"":Error(this.message)};jasmine.ExpectationResult.prototype.toString=function(){return this.message};
jasmine.ExpectationResult.prototype.passed=function(){return this.passed_};jasmine.getEnv=function(){return jasmine.currentEnv_=jasmine.currentEnv_||new jasmine.Env};jasmine.isArray_=function(a){return jasmine.isA_("Array",a)};jasmine.isString_=function(a){return jasmine.isA_("String",a)};jasmine.isNumber_=function(a){return jasmine.isA_("Number",a)};jasmine.isA_=function(a,b){return Object.prototype.toString.apply(b)==="[object "+a+"]"};
jasmine.pp=function(a){var b=new jasmine.StringPrettyPrinter;b.format(a);return b.string};jasmine.isDomNode=function(a){return 0<a.nodeType};jasmine.any=function(a){return new jasmine.Matchers.Any(a)};jasmine.Spy=function(a){this.identity=a||"unknown";this.isSpy=!0;this.plan=function(){};this.mostRecentCall={};this.argsForCall=[];this.calls=[]};jasmine.Spy.prototype.andCallThrough=function(){this.plan=this.originalValue;return this};
jasmine.Spy.prototype.andReturn=function(a){this.plan=function(){return a};return this};jasmine.Spy.prototype.andThrow=function(a){this.plan=function(){throw a;};return this};jasmine.Spy.prototype.andCallFake=function(a){this.plan=a;return this};jasmine.Spy.prototype.reset=function(){this.wasCalled=!1;this.callCount=0;this.argsForCall=[];this.calls=[];this.mostRecentCall={}};
jasmine.createSpy=function(a){var b=function(){b.wasCalled=!0;b.callCount++;var a=jasmine.util.argsToArray(arguments);b.mostRecentCall.object=this;b.mostRecentCall.args=a;b.argsForCall.push(a);b.calls.push({object:this,args:a});return b.plan.apply(this,arguments)},a=new jasmine.Spy(a),c;for(c in a)b[c]=a[c];b.reset();return b};jasmine.isSpy=function(a){return a&&a.isSpy};
jasmine.createSpyObj=function(a,b){if(!jasmine.isArray_(b)||0==b.length)throw Error("createSpyObj requires a non-empty array of method names to create spies for");for(var c={},d=0;d<b.length;d++)c[b[d]]=jasmine.createSpy(a+"."+b[d]);return c};jasmine.log=function(){var a=jasmine.getEnv().currentSpec;a.log.apply(a,arguments)};
var spyOn=function(a,b){return jasmine.getEnv().currentSpec.spyOn(a,b)},it=function(a,b){return jasmine.getEnv().it(a,b)},xit=function(a,b){return jasmine.getEnv().xit(a,b)},expect=function(a){return jasmine.getEnv().currentSpec.expect(a)},runs=function(a){jasmine.getEnv().currentSpec.runs(a)},waits=function(a){jasmine.getEnv().currentSpec.waits(a)},waitsFor=function(a,b,c){jasmine.getEnv().currentSpec.waitsFor.apply(jasmine.getEnv().currentSpec,arguments)},beforeEach=function(a){jasmine.getEnv().beforeEach(a)},
afterEach=function(a){jasmine.getEnv().afterEach(a)},describe=function(a,b){return jasmine.getEnv().describe(a,b)},xdescribe=function(a,b){return jasmine.getEnv().xdescribe(a,b)};
jasmine.XmlHttpRequest="undefined"==typeof XMLHttpRequest?function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}throw Error("This browser does not support XMLHttpRequest.");}:XMLHttpRequest;jasmine.util={};jasmine.util.inherit=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c};
jasmine.util.formatException=function(a){var b;a.line?b=a.line:a.lineNumber&&(b=a.lineNumber);var c;a.sourceURL?c=a.sourceURL:a.fileName&&(c=a.fileName);a=a.name&&a.message?a.name+": "+a.message:a.toString();c&&b&&(a+=" in "+c+" (line "+b+")");return a};jasmine.util.htmlEscape=function(a){return!a?a:a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};jasmine.util.argsToArray=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b};
jasmine.util.extend=function(a,b){for(var c in b)a[c]=b[c];return a};
jasmine.Env=function(){this.currentSuite=this.currentSpec=null;this.currentRunner_=new jasmine.Runner(this);this.reporter=new jasmine.MultiReporter;this.updateInterval=jasmine.DEFAULT_UPDATE_INTERVAL;this.defaultTimeoutInterval=jasmine.DEFAULT_TIMEOUT_INTERVAL;this.lastUpdate=0;this.specFilter=function(){return!0};this.nextSuiteId_=this.nextSpecId_=0;this.equalityTesters_=[];this.matchersClass=function(){jasmine.Matchers.apply(this,arguments)};jasmine.util.inherit(this.matchersClass,jasmine.Matchers);
jasmine.Matchers.wrapInto_(jasmine.Matchers.prototype,this.matchersClass)};jasmine.Env.prototype.setTimeout=jasmine.setTimeout;jasmine.Env.prototype.clearTimeout=jasmine.clearTimeout;jasmine.Env.prototype.setInterval=jasmine.setInterval;jasmine.Env.prototype.clearInterval=jasmine.clearInterval;jasmine.Env.prototype.version=function(){if(jasmine.version_)return jasmine.version_;throw Error("Version not set");};
jasmine.Env.prototype.versionString=function(){if(jasmine.version_){var a=this.version();return a.major+"."+a.minor+"."+a.build+" revision "+a.revision}return"version unknown"};jasmine.Env.prototype.nextSpecId=function(){return this.nextSpecId_++};jasmine.Env.prototype.nextSuiteId=function(){return this.nextSuiteId_++};jasmine.Env.prototype.addReporter=function(a){this.reporter.addReporter(a)};jasmine.Env.prototype.execute=function(){this.currentRunner_.execute()};
jasmine.Env.prototype.describe=function(a,b){var c=new jasmine.Suite(this,a,b,this.currentSuite),d=this.currentSuite;d?d.add(c):this.currentRunner_.add(c);this.currentSuite=c;var e=null;try{b.call(c)}catch(f){e=f}this.currentSuite=d;e&&this.it("encountered a declaration exception",function(){throw e;});return c};jasmine.Env.prototype.beforeEach=function(a){this.currentSuite?this.currentSuite.beforeEach(a):this.currentRunner_.beforeEach(a)};jasmine.Env.prototype.currentRunner=function(){return this.currentRunner_};
jasmine.Env.prototype.afterEach=function(a){this.currentSuite?this.currentSuite.afterEach(a):this.currentRunner_.afterEach(a)};jasmine.Env.prototype.xdescribe=function(){return{execute:function(){}}};jasmine.Env.prototype.it=function(a,b){var c=new jasmine.Spec(this,this.currentSuite,a);this.currentSuite.add(c);this.currentSpec=c;b&&c.runs(b);return c};jasmine.Env.prototype.xit=function(){return{id:this.nextSpecId(),runs:function(){}}};
jasmine.Env.prototype.compareObjects_=function(a,b,c,d){if(a.__Jasmine_been_here_before__===b&&b.__Jasmine_been_here_before__===a)return!0;a.__Jasmine_been_here_before__=b;b.__Jasmine_been_here_before__=a;var e=function(a,b){return null!=a&&a[b]!==jasmine.undefined},f;for(f in b)!e(a,f)&&e(b,f)&&c.push("expected has key '"+f+"', but missing from actual.");for(f in a)!e(b,f)&&e(a,f)&&c.push("expected missing key '"+f+"', but present in actual.");for(f in b)"__Jasmine_been_here_before__"!=f&&(this.equals_(a[f],
b[f],c,d)||d.push("'"+f+"' was '"+(b[f]?jasmine.util.htmlEscape(b[f].toString()):b[f])+"' in expected, but was '"+(a[f]?jasmine.util.htmlEscape(a[f].toString()):a[f])+"' in actual."));jasmine.isArray_(a)&&(jasmine.isArray_(b)&&a.length!=b.length)&&d.push("arrays were not the same length");delete a.__Jasmine_been_here_before__;delete b.__Jasmine_been_here_before__;return 0==c.length&&0==d.length};
jasmine.Env.prototype.equals_=function(a,b,c,d){for(var c=c||[],d=d||[],e=0;e<this.equalityTesters_.length;e++){var f=(0,this.equalityTesters_[e])(a,b,this,c,d);if(f!==jasmine.undefined)return f}return a===b?!0:a===jasmine.undefined||null===a||b===jasmine.undefined||null===b?a==jasmine.undefined&&b==jasmine.undefined:jasmine.isDomNode(a)&&jasmine.isDomNode(b)?a===b:a instanceof Date&&b instanceof Date?a.getTime()==b.getTime():a instanceof jasmine.Matchers.Any?a.matches(b):b instanceof jasmine.Matchers.Any?
b.matches(a):jasmine.isString_(a)&&jasmine.isString_(b)||jasmine.isNumber_(a)&&jasmine.isNumber_(b)?a==b:"object"===typeof a&&"object"===typeof b?this.compareObjects_(a,b,c,d):a===b};jasmine.Env.prototype.contains_=function(a,b){if(jasmine.isArray_(a)){for(var c=0;c<a.length;c++)if(this.equals_(a[c],b))return!0;return!1}return 0<=a.indexOf(b)};jasmine.Env.prototype.addEqualityTester=function(a){this.equalityTesters_.push(a)};jasmine.Reporter=function(){};
jasmine.Reporter.prototype.reportRunnerStarting=function(){};jasmine.Reporter.prototype.reportRunnerResults=function(){};jasmine.Reporter.prototype.reportSuiteResults=function(){};jasmine.Reporter.prototype.reportSpecStarting=function(){};jasmine.Reporter.prototype.reportSpecResults=function(){};jasmine.Reporter.prototype.log=function(){};jasmine.Block=function(a,b,c){this.env=a;this.func=b;this.spec=c};jasmine.Block.prototype.execute=function(a){try{this.func.apply(this.spec)}catch(b){this.spec.fail(b)}a()};
jasmine.JsApiReporter=function(){this.finished=this.started=!1;this.suites_=[];this.results_={}};jasmine.JsApiReporter.prototype.reportRunnerStarting=function(a){this.started=!0;for(var a=a.topLevelSuites(),b=0;b<a.length;b++)this.suites_.push(this.summarize_(a[b]))};jasmine.JsApiReporter.prototype.suites=function(){return this.suites_};
jasmine.JsApiReporter.prototype.summarize_=function(a){var b=a instanceof jasmine.Suite,c={id:a.id,name:a.description,type:b?"suite":"spec",children:[]};if(b){a=a.children();for(b=0;b<a.length;b++)c.children.push(this.summarize_(a[b]))}return c};jasmine.JsApiReporter.prototype.results=function(){return this.results_};jasmine.JsApiReporter.prototype.resultsForSpec=function(a){return this.results_[a]};jasmine.JsApiReporter.prototype.reportRunnerResults=function(){this.finished=!0};
jasmine.JsApiReporter.prototype.reportSuiteResults=function(){};jasmine.JsApiReporter.prototype.reportSpecResults=function(a){this.results_[a.id]={messages:a.results().getItems(),result:0<a.results().failedCount?"failed":"passed"}};jasmine.JsApiReporter.prototype.log=function(){};jasmine.JsApiReporter.prototype.resultsForSpecs=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d]=this.summarizeResult_(this.results_[d])}return b};
jasmine.JsApiReporter.prototype.summarizeResult_=function(a){for(var b=[],c=a.messages.length,d=0;d<c;d++){var e=a.messages[d];b.push({text:"log"==e.type?e.toString():jasmine.undefined,passed:e.passed?e.passed():!0,type:e.type,message:e.message,trace:{stack:e.passed&&!e.passed()?e.trace.stack:jasmine.undefined}})}return{result:a.result,messages:b}};jasmine.Matchers=function(a,b,c,d){this.env=a;this.actual=b;this.spec=c;this.isNot=d||!1;this.reportWasCalled_=!1};
jasmine.Matchers.pp=function(){throw Error("jasmine.Matchers.pp() is no longer supported, please use jasmine.pp() instead!");};jasmine.Matchers.prototype.report=function(){throw Error("As of jasmine 0.11, custom matchers must be implemented differently -- please see jasmine docs");};jasmine.Matchers.wrapInto_=function(a,b){for(var c in a)"report"!=c&&(b.prototype[c]=jasmine.Matchers.matcherFn_(c,a[c]))};
jasmine.Matchers.matcherFn_=function(a,b){return function(){var c=jasmine.util.argsToArray(arguments),d=b.apply(this,arguments);this.isNot&&(d=!d);if(this.reportWasCalled_)return d;var e;if(!d)if(this.message)e=this.message.apply(this,arguments),jasmine.isArray_(e)&&(e=e[this.isNot?1:0]);else{e=a.replace(/[A-Z]/g,function(a){return" "+a.toLowerCase()});e="Expected "+jasmine.pp(this.actual)+(this.isNot?" not ":" ")+e;if(0<c.length)for(var f=0;f<c.length;f++)0<f&&(e+=","),e+=" "+jasmine.pp(c[f]);e+=
"."}this.spec.addMatcherResult(new jasmine.ExpectationResult({matcherName:a,passed:d,expected:1<c.length?c:c[0],actual:this.actual,message:e}));return jasmine.undefined}};jasmine.Matchers.prototype.toBe=function(a){return this.actual===a};jasmine.Matchers.prototype.toNotBe=function(a){return this.actual!==a};jasmine.Matchers.prototype.toEqual=function(a){return this.env.equals_(this.actual,a)};jasmine.Matchers.prototype.toNotEqual=function(a){return!this.env.equals_(this.actual,a)};
jasmine.Matchers.prototype.toMatch=function(a){return RegExp(a).test(this.actual)};jasmine.Matchers.prototype.toNotMatch=function(a){return!RegExp(a).test(this.actual)};jasmine.Matchers.prototype.toBeDefined=function(){return this.actual!==jasmine.undefined};jasmine.Matchers.prototype.toBeUndefined=function(){return this.actual===jasmine.undefined};jasmine.Matchers.prototype.toBeNull=function(){return null===this.actual};jasmine.Matchers.prototype.toBeTruthy=function(){return!!this.actual};
jasmine.Matchers.prototype.toBeFalsy=function(){return!this.actual};jasmine.Matchers.prototype.toHaveBeenCalled=function(){if(0<arguments.length)throw Error("toHaveBeenCalled does not take arguments, use toHaveBeenCalledWith");if(!jasmine.isSpy(this.actual))throw Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");this.message=function(){return["Expected spy "+this.actual.identity+" to have been called.","Expected spy "+this.actual.identity+" not to have been called."]};return this.actual.wasCalled};
jasmine.Matchers.prototype.wasCalled=jasmine.Matchers.prototype.toHaveBeenCalled;jasmine.Matchers.prototype.wasNotCalled=function(){if(0<arguments.length)throw Error("wasNotCalled does not take arguments");if(!jasmine.isSpy(this.actual))throw Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");this.message=function(){return["Expected spy "+this.actual.identity+" to not have been called.","Expected spy "+this.actual.identity+" to have been called."]};return!this.actual.wasCalled};
jasmine.Matchers.prototype.toHaveBeenCalledWith=function(){var a=jasmine.util.argsToArray(arguments);if(!jasmine.isSpy(this.actual))throw Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");this.message=function(){return 0==this.actual.callCount?["Expected spy to have been called with "+jasmine.pp(a)+" but it was never called.","Expected spy not to have been called with "+jasmine.pp(a)+" but it was."]:["Expected spy to have been called with "+jasmine.pp(a)+" but was called with "+jasmine.pp(this.actual.argsForCall),
"Expected spy not to have been called with "+jasmine.pp(a)+" but was called with "+jasmine.pp(this.actual.argsForCall)]};return this.env.contains_(this.actual.argsForCall,a)};jasmine.Matchers.prototype.wasCalledWith=jasmine.Matchers.prototype.toHaveBeenCalledWith;
jasmine.Matchers.prototype.wasNotCalledWith=function(){var a=jasmine.util.argsToArray(arguments);if(!jasmine.isSpy(this.actual))throw Error("Expected a spy, but got "+jasmine.pp(this.actual)+".");this.message=function(){return["Expected spy not to have been called with "+jasmine.pp(a)+" but it was","Expected spy to have been called with "+jasmine.pp(a)+" but it was"]};return!this.env.contains_(this.actual.argsForCall,a)};
jasmine.Matchers.prototype.toContain=function(a){return this.env.contains_(this.actual,a)};jasmine.Matchers.prototype.toNotContain=function(a){return!this.env.contains_(this.actual,a)};jasmine.Matchers.prototype.toBeLessThan=function(a){return this.actual<a};jasmine.Matchers.prototype.toBeGreaterThan=function(a){return this.actual>a};
jasmine.Matchers.prototype.toThrow=function(a){var b=!1,c;if("function"!=typeof this.actual)throw Error("Actual is not a function");try{this.actual()}catch(d){c=d}c&&(b=a===jasmine.undefined||this.env.equals_(c.message||c,a.message||a));var e=this.isNot?"not ":"";this.message=function(){return c&&(a===jasmine.undefined||!this.env.equals_(c.message||c,a.message||a))?["Expected function "+e+"to throw",a?a.message||a:" an exception",", but it threw",c.message||c].join(" "):"Expected function to throw an exception."};
return b};jasmine.Matchers.Any=function(a){this.expectedClass=a};jasmine.Matchers.Any.prototype.matches=function(a){return this.expectedClass==String?"string"==typeof a||a instanceof String:this.expectedClass==Number?"number"==typeof a||a instanceof Number:this.expectedClass==Function?"function"==typeof a||a instanceof Function:this.expectedClass==Object?"object"==typeof a:a instanceof this.expectedClass};
jasmine.Matchers.Any.prototype.toString=function(){return"<jasmine.any("+this.expectedClass+")>"};jasmine.MultiReporter=function(){this.subReporters_=[]};jasmine.util.inherit(jasmine.MultiReporter,jasmine.Reporter);jasmine.MultiReporter.prototype.addReporter=function(a){this.subReporters_.push(a)};
(function(){for(var a="reportRunnerStarting reportRunnerResults reportSuiteResults reportSpecStarting reportSpecResults log".split(" "),b=0;b<a.length;b++){var c=a[b];jasmine.MultiReporter.prototype[c]=function(a){return function(){for(var b=0;b<this.subReporters_.length;b++){var c=this.subReporters_[b];c[a]&&c[a].apply(c,arguments)}}}(c)}})();jasmine.NestedResults=function(){this.failedCount=this.passedCount=this.totalCount=0;this.skipped=!1;this.items_=[]};
jasmine.NestedResults.prototype.rollupCounts=function(a){this.totalCount+=a.totalCount;this.passedCount+=a.passedCount;this.failedCount+=a.failedCount};jasmine.NestedResults.prototype.log=function(a){this.items_.push(new jasmine.MessageResult(a))};jasmine.NestedResults.prototype.getItems=function(){return this.items_};jasmine.NestedResults.prototype.addResult=function(a){"log"!=a.type&&(a.items_?this.rollupCounts(a):(this.totalCount++,a.passed()?this.passedCount++:this.failedCount++));this.items_.push(a)};
jasmine.NestedResults.prototype.passed=function(){return this.passedCount===this.totalCount};jasmine.PrettyPrinter=function(){this.ppNestLevel_=0};
jasmine.PrettyPrinter.prototype.format=function(a){if(40<this.ppNestLevel_)throw Error("jasmine.PrettyPrinter: format() nested too deeply!");this.ppNestLevel_++;try{a===jasmine.undefined?this.emitScalar("undefined"):null===a?this.emitScalar("null"):a===jasmine.getGlobal()?this.emitScalar("<global>"):a instanceof jasmine.Matchers.Any?this.emitScalar(a.toString()):"string"===typeof a?this.emitString(a):jasmine.isSpy(a)?this.emitScalar("spy on "+a.identity):a instanceof RegExp?this.emitScalar(a.toString()):
"function"===typeof a?this.emitScalar("Function"):"number"===typeof a.nodeType?this.emitScalar("HTMLNode"):a instanceof Date?this.emitScalar("Date("+a+")"):a.__Jasmine_been_here_before__?this.emitScalar("<circular reference: "+(jasmine.isArray_(a)?"Array":"Object")+">"):jasmine.isArray_(a)||"object"==typeof a?(a.__Jasmine_been_here_before__=!0,jasmine.isArray_(a)?this.emitArray(a):this.emitObject(a),delete a.__Jasmine_been_here_before__):this.emitScalar(a.toString())}finally{this.ppNestLevel_--}};
jasmine.PrettyPrinter.prototype.iterateObject=function(a,b){for(var c in a)"__Jasmine_been_here_before__"!=c&&b(c,a.__lookupGetter__?null!=a.__lookupGetter__(c):!1)};jasmine.PrettyPrinter.prototype.emitArray=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitObject=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitScalar=jasmine.unimplementedMethod_;jasmine.PrettyPrinter.prototype.emitString=jasmine.unimplementedMethod_;
jasmine.StringPrettyPrinter=function(){jasmine.PrettyPrinter.call(this);this.string=""};jasmine.util.inherit(jasmine.StringPrettyPrinter,jasmine.PrettyPrinter);jasmine.StringPrettyPrinter.prototype.emitScalar=function(a){this.append(a)};jasmine.StringPrettyPrinter.prototype.emitString=function(a){this.append("'"+a+"'")};jasmine.StringPrettyPrinter.prototype.emitArray=function(a){this.append("[ ");for(var b=0;b<a.length;b++)0<b&&this.append(", "),this.format(a[b]);this.append(" ]")};
jasmine.StringPrettyPrinter.prototype.emitObject=function(a){var b=this;this.append("{ ");var c=!0;this.iterateObject(a,function(d,e){c?c=!1:b.append(", ");b.append(d);b.append(" : ");e?b.append("<getter>"):b.format(a[d])});this.append(" }")};jasmine.StringPrettyPrinter.prototype.append=function(a){this.string+=a};jasmine.Queue=function(a){this.env=a;this.blocks=[];this.running=!1;this.offset=this.index=0;this.abort=!1};jasmine.Queue.prototype.addBefore=function(a){this.blocks.unshift(a)};
jasmine.Queue.prototype.add=function(a){this.blocks.push(a)};jasmine.Queue.prototype.insertNext=function(a){this.blocks.splice(this.index+this.offset+1,0,a);this.offset++};jasmine.Queue.prototype.start=function(a){this.running=!0;this.onComplete=a;this.next_()};jasmine.Queue.prototype.isRunning=function(){return this.running};jasmine.Queue.LOOP_DONT_RECURSE=!0;
jasmine.Queue.prototype.next_=function(){for(var a=this,b=!0;b;)if(b=!1,a.index<a.blocks.length&&!this.abort){var c=!0,d=!1,e=function(){if(jasmine.Queue.LOOP_DONT_RECURSE&&c)d=!0;else{a.blocks[a.index].abort&&(a.abort=!0);a.offset=0;a.index++;var e=(new Date).getTime();a.env.updateInterval&&e-a.env.lastUpdate>a.env.updateInterval?(a.env.lastUpdate=e,a.env.setTimeout(function(){a.next_()},0)):jasmine.Queue.LOOP_DONT_RECURSE&&d?b=!0:a.next_()}};a.blocks[a.index].execute(e);c=!1;d&&e()}else if(a.running=
!1,a.onComplete)a.onComplete()};jasmine.Queue.prototype.results=function(){for(var a=new jasmine.NestedResults,b=0;b<this.blocks.length;b++)this.blocks[b].results&&a.addResult(this.blocks[b].results());return a};jasmine.Runner=function(a){this.env=a;this.queue=new jasmine.Queue(a);this.before_=[];this.after_=[];this.suites_=[]};jasmine.Runner.prototype.execute=function(){var a=this;a.env.reporter.reportRunnerStarting&&a.env.reporter.reportRunnerStarting(this);a.queue.start(function(){a.finishCallback()})};
jasmine.Runner.prototype.beforeEach=function(a){a.typeName="beforeEach";this.before_.splice(0,0,a)};jasmine.Runner.prototype.afterEach=function(a){a.typeName="afterEach";this.after_.splice(0,0,a)};jasmine.Runner.prototype.finishCallback=function(){this.env.reporter.reportRunnerResults(this)};jasmine.Runner.prototype.addSuite=function(a){this.suites_.push(a)};jasmine.Runner.prototype.add=function(a){a instanceof jasmine.Suite&&this.addSuite(a);this.queue.add(a)};
jasmine.Runner.prototype.specs=function(){for(var a=this.suites(),b=[],c=0;c<a.length;c++)b=b.concat(a[c].specs());return b};jasmine.Runner.prototype.suites=function(){return this.suites_};jasmine.Runner.prototype.topLevelSuites=function(){for(var a=[],b=0;b<this.suites_.length;b++)this.suites_[b].parentSuite||a.push(this.suites_[b]);return a};jasmine.Runner.prototype.results=function(){return this.queue.results()};
jasmine.Spec=function(a,b,c){if(!a)throw Error("jasmine.Env() required");if(!b)throw Error("jasmine.Suite() required");this.id=a.nextSpecId?a.nextSpecId():null;this.env=a;this.suite=b;this.description=c;this.queue=new jasmine.Queue(a);this.afterCallbacks=[];this.spies_=[];this.results_=new jasmine.NestedResults;this.results_.description=c;this.matchersClass=null};jasmine.Spec.prototype.getFullName=function(){return this.suite.getFullName()+" "+this.description+"."};
jasmine.Spec.prototype.results=function(){return this.results_};jasmine.Spec.prototype.log=function(){return this.results_.log(arguments)};jasmine.Spec.prototype.runs=function(a){this.addToQueue(new jasmine.Block(this.env,a,this));return this};jasmine.Spec.prototype.addToQueue=function(a){this.queue.isRunning()?this.queue.insertNext(a):this.queue.add(a)};jasmine.Spec.prototype.addMatcherResult=function(a){this.results_.addResult(a)};
jasmine.Spec.prototype.expect=function(a){var b=new (this.getMatchersClass_())(this.env,a,this);b.not=new (this.getMatchersClass_())(this.env,a,this,!0);return b};jasmine.Spec.prototype.waits=function(a){this.addToQueue(new jasmine.WaitsBlock(this.env,a,this));return this};
jasmine.Spec.prototype.waitsFor=function(a,b,c){for(var d=null,e=null,f=null,g=0;g<arguments.length;g++){var h=arguments[g];switch(typeof h){case "function":d=h;break;case "string":e=h;break;case "number":f=h}}this.addToQueue(new jasmine.WaitsForBlock(this.env,f,d,e,this));return this};jasmine.Spec.prototype.fail=function(a){this.results_.addResult(new jasmine.ExpectationResult({passed:!1,message:a?jasmine.util.formatException(a):"Exception"}))};
jasmine.Spec.prototype.getMatchersClass_=function(){return this.matchersClass||this.env.matchersClass};jasmine.Spec.prototype.addMatchers=function(a){var b=this.getMatchersClass_(),c=function(){b.apply(this,arguments)};jasmine.util.inherit(c,b);jasmine.Matchers.wrapInto_(a,c);this.matchersClass=c};jasmine.Spec.prototype.finishCallback=function(){this.env.reporter.reportSpecResults(this)};jasmine.Spec.prototype.finish=function(a){this.removeAllSpies();this.finishCallback();a&&a()};
jasmine.Spec.prototype.after=function(a){this.queue.isRunning()?this.queue.add(new jasmine.Block(this.env,a,this)):this.afterCallbacks.unshift(a)};jasmine.Spec.prototype.execute=function(a){var b=this;b.env.specFilter(b)?(this.env.reporter.reportSpecStarting(this),b.env.currentSpec=b,b.addBeforesAndAftersToQueue(),b.queue.start(function(){b.finish(a)})):(b.results_.skipped=!0,b.finish(a))};
jasmine.Spec.prototype.addBeforesAndAftersToQueue=function(){for(var a=this.env.currentRunner(),b,c=this.suite;c;c=c.parentSuite)for(b=0;b<c.before_.length;b++)this.queue.addBefore(new jasmine.Block(this.env,c.before_[b],this));for(b=0;b<a.before_.length;b++)this.queue.addBefore(new jasmine.Block(this.env,a.before_[b],this));for(b=0;b<this.afterCallbacks.length;b++)this.queue.add(new jasmine.Block(this.env,this.afterCallbacks[b],this));for(c=this.suite;c;c=c.parentSuite)for(b=0;b<c.after_.length;b++)this.queue.add(new jasmine.Block(this.env,
c.after_[b],this));for(b=0;b<a.after_.length;b++)this.queue.add(new jasmine.Block(this.env,a.after_[b],this))};jasmine.Spec.prototype.explodes=function(){throw"explodes function should not have been called";};
jasmine.Spec.prototype.spyOn=function(a,b,c){if(a==jasmine.undefined)throw"spyOn could not find an object to spy upon for "+b+"()";if(!c&&a[b]===jasmine.undefined)throw b+"() method does not exist";if(!c&&a[b]&&a[b].isSpy)throw Error(b+" has already been spied upon");c=jasmine.createSpy(b);this.spies_.push(c);c.baseObj=a;c.methodName=b;c.originalValue=a[b];return a[b]=c};
jasmine.Spec.prototype.removeAllSpies=function(){for(var a=0;a<this.spies_.length;a++){var b=this.spies_[a];b.baseObj[b.methodName]=b.originalValue}this.spies_=[]};jasmine.Suite=function(a,b,c,d){this.id=a.nextSuiteId?a.nextSuiteId():null;this.description=b;this.queue=new jasmine.Queue(a);this.parentSuite=d;this.env=a;this.before_=[];this.after_=[];this.children_=[];this.suites_=[];this.specs_=[]};
jasmine.Suite.prototype.getFullName=function(){for(var a=this.description,b=this.parentSuite;b;b=b.parentSuite)a=b.description+" "+a;return a};jasmine.Suite.prototype.finish=function(a){this.env.reporter.reportSuiteResults(this);this.finished=!0;"function"==typeof a&&a()};jasmine.Suite.prototype.beforeEach=function(a){a.typeName="beforeEach";this.before_.unshift(a)};jasmine.Suite.prototype.afterEach=function(a){a.typeName="afterEach";this.after_.unshift(a)};jasmine.Suite.prototype.results=function(){return this.queue.results()};
jasmine.Suite.prototype.add=function(a){this.children_.push(a);a instanceof jasmine.Suite?(this.suites_.push(a),this.env.currentRunner().addSuite(a)):this.specs_.push(a);this.queue.add(a)};jasmine.Suite.prototype.specs=function(){return this.specs_};jasmine.Suite.prototype.suites=function(){return this.suites_};jasmine.Suite.prototype.children=function(){return this.children_};jasmine.Suite.prototype.execute=function(a){var b=this;this.queue.start(function(){b.finish(a)})};
jasmine.WaitsBlock=function(a,b,c){this.timeout=b;jasmine.Block.call(this,a,null,c)};jasmine.util.inherit(jasmine.WaitsBlock,jasmine.Block);jasmine.WaitsBlock.prototype.execute=function(a){this.env.reporter.log(">> Jasmine waiting for "+this.timeout+" ms...");this.env.setTimeout(function(){a()},this.timeout)};jasmine.WaitsForBlock=function(a,b,c,d,e){this.timeout=b||a.defaultTimeoutInterval;this.latchFunction=c;this.message=d;this.totalTimeSpentWaitingForLatch=0;jasmine.Block.call(this,a,null,e)};
jasmine.util.inherit(jasmine.WaitsForBlock,jasmine.Block);jasmine.WaitsForBlock.TIMEOUT_INCREMENT=10;
jasmine.WaitsForBlock.prototype.execute=function(a){this.env.reporter.log(">> Jasmine waiting for "+(this.message||"something to happen"));var b;try{b=this.latchFunction.apply(this.spec)}catch(c){this.spec.fail(c);a();return}if(b)a();else if(this.totalTimeSpentWaitingForLatch>=this.timeout)this.spec.fail({name:"timeout",message:"timed out after "+this.timeout+" msec waiting for "+(this.message||"something to happen")}),this.abort=!0,a();else{this.totalTimeSpentWaitingForLatch+=jasmine.WaitsForBlock.TIMEOUT_INCREMENT;
var d=this;this.env.setTimeout(function(){d.execute(a)},jasmine.WaitsForBlock.TIMEOUT_INCREMENT)}};jasmine.FakeTimer=function(){this.reset();var a=this;a.setTimeout=function(b,c){a.timeoutsMade++;a.scheduleFunction(a.timeoutsMade,b,c,!1);return a.timeoutsMade};a.setInterval=function(b,c){a.timeoutsMade++;a.scheduleFunction(a.timeoutsMade,b,c,!0);return a.timeoutsMade};a.clearTimeout=function(b){a.scheduledFunctions[b]=jasmine.undefined};a.clearInterval=function(b){a.scheduledFunctions[b]=jasmine.undefined}};
jasmine.FakeTimer.prototype.reset=function(){this.timeoutsMade=0;this.scheduledFunctions={};this.nowMillis=0};jasmine.FakeTimer.prototype.tick=function(a){var b=this.nowMillis,a=b+a;this.runFunctionsWithinRange(b,a);this.nowMillis=a};
jasmine.FakeTimer.prototype.runFunctionsWithinRange=function(a,b){var c,d=[],e;for(e in this.scheduledFunctions)c=this.scheduledFunctions[e],c!=jasmine.undefined&&(c.runAtMillis>=a&&c.runAtMillis<=b)&&(d.push(c),this.scheduledFunctions[e]=jasmine.undefined);if(0<d.length){d.sort(function(a,b){return a.runAtMillis-b.runAtMillis});for(c=0;c<d.length;++c)try{var f=d[c];this.nowMillis=f.runAtMillis;f.funcToCall();f.recurring&&this.scheduleFunction(f.timeoutKey,f.funcToCall,f.millis,!0)}catch(g){}this.runFunctionsWithinRange(a,
b)}};jasmine.FakeTimer.prototype.scheduleFunction=function(a,b,c,d){this.scheduledFunctions[a]={runAtMillis:this.nowMillis+c,funcToCall:b,recurring:d,timeoutKey:a,millis:c}};
jasmine.Clock={defaultFakeTimer:new jasmine.FakeTimer,reset:function(){jasmine.Clock.assertInstalled();jasmine.Clock.defaultFakeTimer.reset()},tick:function(a){jasmine.Clock.assertInstalled();jasmine.Clock.defaultFakeTimer.tick(a)},runFunctionsWithinRange:function(a,b){jasmine.Clock.defaultFakeTimer.runFunctionsWithinRange(a,b)},scheduleFunction:function(a,b,c,d){jasmine.Clock.defaultFakeTimer.scheduleFunction(a,b,c,d)},useMock:function(){jasmine.Clock.isInstalled()||(jasmine.getEnv().currentSpec.after(jasmine.Clock.uninstallMock),
jasmine.Clock.installMock())},installMock:function(){jasmine.Clock.installed=jasmine.Clock.defaultFakeTimer},uninstallMock:function(){jasmine.Clock.assertInstalled();jasmine.Clock.installed=jasmine.Clock.real},real:{setTimeout:jasmine.getGlobal().setTimeout,clearTimeout:jasmine.getGlobal().clearTimeout,setInterval:jasmine.getGlobal().setInterval,clearInterval:jasmine.getGlobal().clearInterval},assertInstalled:function(){if(!jasmine.Clock.isInstalled())throw Error("Mock clock is not installed, use jasmine.Clock.useMock()");
},isInstalled:function(){return jasmine.Clock.installed==jasmine.Clock.defaultFakeTimer},installed:null};jasmine.Clock.installed=jasmine.Clock.real;jasmine.getGlobal().setTimeout=function(a,b){return jasmine.Clock.installed.setTimeout.apply?jasmine.Clock.installed.setTimeout.apply(this,arguments):jasmine.Clock.installed.setTimeout(a,b)};
jasmine.getGlobal().setInterval=function(a,b){return jasmine.Clock.installed.setInterval.apply?jasmine.Clock.installed.setInterval.apply(this,arguments):jasmine.Clock.installed.setInterval(a,b)};jasmine.getGlobal().clearTimeout=function(a){return jasmine.Clock.installed.clearTimeout.apply?jasmine.Clock.installed.clearTimeout.apply(this,arguments):jasmine.Clock.installed.clearTimeout(a)};
jasmine.getGlobal().clearInterval=function(a){return jasmine.Clock.installed.clearTimeout.apply?jasmine.Clock.installed.clearInterval.apply(this,arguments):jasmine.Clock.installed.clearInterval(a)};jasmine.version_={major:1,minor:0,build:1,revision:1286311016};
jasmine.TrivialReporter=function(a){this.document=a||document;this.suiteDivs={};this.logRunningSpecs=!1};jasmine.TrivialReporter.prototype.createDom=function(a,b,c){for(var d=document.createElement(a),e=2;e<arguments.length;e++){var f=arguments[e];"string"===typeof f?d.appendChild(document.createTextNode(f)):f&&d.appendChild(f)}for(var g in b)"className"==g?d[g]=b[g]:d.setAttribute(g,b[g]);return d};
jasmine.TrivialReporter.prototype.reportRunnerStarting=function(a){var b,c;this.outerDiv=this.createDom("div",{className:"jasmine_reporter"},this.createDom("div",{className:"banner"},this.createDom("div",{className:"logo"},this.createDom("a",{href:"http://pivotal.github.com/jasmine/",target:"_blank"},"Jasmine"),this.createDom("span",{className:"version"},a.env.versionString())),this.createDom("div",{className:"options"},"Show ",b=this.createDom("input",{id:"__jasmine_TrivialReporter_showPassed__",
type:"checkbox"}),this.createDom("label",{"for":"__jasmine_TrivialReporter_showPassed__"}," passed "),c=this.createDom("input",{id:"__jasmine_TrivialReporter_showSkipped__",type:"checkbox"}),this.createDom("label",{"for":"__jasmine_TrivialReporter_showSkipped__"}," skipped"))),this.runnerDiv=this.createDom("div",{className:"runner running"},this.createDom("a",{className:"run_spec",href:"?"},"run all"),this.runnerMessageSpan=this.createDom("span",{},"Running..."),this.finishedAtSpan=this.createDom("span",
{className:"finished-at"},"")));this.document.body.appendChild(this.outerDiv);for(var a=a.suites(),d=0;d<a.length;d++){var e=a[d],f=this.createDom("div",{className:"suite"},this.createDom("a",{className:"run_spec",href:"?spec="+encodeURIComponent(e.getFullName())},"run"),this.createDom("a",{className:"description",href:"?spec="+encodeURIComponent(e.getFullName())},e.description));this.suiteDivs[e.id]=f;var g=this.outerDiv;e.parentSuite&&(g=this.suiteDivs[e.parentSuite.id]);g.appendChild(f)}this.startedAt=
new Date;var h=this;b.onclick=function(){h.outerDiv.className=b.checked?h.outerDiv.className+" show-passed":h.outerDiv.className.replace(/ show-passed/,"")};c.onclick=function(){h.outerDiv.className=c.checked?h.outerDiv.className+" show-skipped":h.outerDiv.className.replace(/ show-skipped/,"")}};
jasmine.TrivialReporter.prototype.reportRunnerResults=function(a){var b=a.results(),c=0<b.failedCount?"runner failed":"runner passed";this.runnerDiv.setAttribute("class",c);this.runnerDiv.setAttribute("className",c);for(var a=a.specs(),d=c=0;d<a.length;d++)this.specFilter(a[d])&&c++;b=""+c+" spec"+(1==c?"":"s")+", "+b.failedCount+" failure"+(1==b.failedCount?"":"s");b+=" in "+((new Date).getTime()-this.startedAt.getTime())/1E3+"s";this.runnerMessageSpan.replaceChild(this.createDom("a",{className:"description",
href:"?"},b),this.runnerMessageSpan.firstChild);this.finishedAtSpan.appendChild(document.createTextNode("Finished at "+(new Date).toString()))};jasmine.TrivialReporter.prototype.reportSuiteResults=function(a){var b=a.results(),c=b.passed()?"passed":"failed";0==b.totalCount&&(c="skipped");this.suiteDivs[a.id].className+=" "+c};jasmine.TrivialReporter.prototype.reportSpecStarting=function(a){this.logRunningSpecs&&this.log(">> Jasmine Running "+a.suite.description+" "+a.description+"...")};
jasmine.TrivialReporter.prototype.reportSpecResults=function(a){var b=a.results(),c=b.passed()?"passed":"failed";b.skipped&&(c="skipped");for(var c=this.createDom("div",{className:"spec "+c},this.createDom("a",{className:"run_spec",href:"?spec="+encodeURIComponent(a.getFullName())},"run"),this.createDom("a",{className:"description",href:"?spec="+encodeURIComponent(a.getFullName()),title:a.getFullName()},a.description.split("__::__")[1])),b=b.getItems(),d=this.createDom("div",{className:"messages"}),
e=0;e<b.length;e++){var f=b[e];"log"==f.type?d.appendChild(this.createDom("div",{className:"resultMessage log"},f.toString())):"expect"==f.type&&f.passed&&!f.passed()&&(d.appendChild(this.createDom("div",{className:"resultMessage fail"},f.message)),f.trace.stack&&d.appendChild(this.createDom("div",{className:"stackTrace"},f.trace.stack)))}0<d.childNodes.length&&c.appendChild(d);this.suiteDivs[a.suite.id].appendChild(c)};
jasmine.TrivialReporter.prototype.log=function(){var a=jasmine.getGlobal().console;a&&a.log&&(a.log.apply?a.log.apply(a,arguments):a.log(arguments))};jasmine.TrivialReporter.prototype.getLocation=function(){return this.document.location};jasmine.TrivialReporter.prototype.specFilter=function(a){for(var b={},c=this.getLocation().search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return!b.spec?!0:0==a.getFullName().indexOf(b.spec)};
(function() {
jasmine.FormalReporter = function(doc) {
   this.document = doc || document;
   this.suiteDivs = {};
   this.logRunningSpecs = false;
 };
 
 jasmine.FormalReporter.prototype.createDom = function(type, attrs, childrenVarArgs) {
 };
 
 jasmine.FormalReporter.prototype.reportRunnerStarting = function(runner) {
   var showPassed, showSkipped;
 
   var suites = runner.suites();
   for (var i = 0; i < suites.length; i++) {
     var suite = suites[i];
   }
 
   this.startedAt = new Date();
 
   var self = this;
 };
 
 jasmine.FormalReporter.prototype.reportRunnerResults = function(runner) {
 };
 
 jasmine.FormalReporter.prototype.reportSuiteResults = function(suite) {
 };
 
 jasmine.FormalReporter.prototype.reportSpecStarting = function(spec) {
 };
 
 jasmine.FormalReporter.prototype.reportSpecResults = function(spec) {
   var results = spec.results();
   var status = results.passed() ? 'passed' : 'failed';
 
     var k = "#test_" + spec.description.split("__::__")[0]
     var el = $(k)

     spec.description = spec.description.split("__::__")[1]

     if (status == "passed") {
         if (k.indexOf("multi") >= 0) {
             $(k).before("<span style='border-radius:3;margin-right:-50px;background-color:rgba(32,186,24,0.5)' title='" + JSON.stringify(spec.results_.items_[0].actual)+ "'> <span style='color:rgb(255,255,255);font-weight:bold'>PASS</span> </span> ")
         } else {
             $(k).before("<span style='border-radius:3;margin-right:-50px;background-color:rgba(32,186,24,0.5)' title='" + spec.results_.items_[0].actual+ "'> <span style='color:rgb(255,255,255);font-weight:bold'>PASS</span> </span> ")
         }
     } else {
         if (k.indexOf("multi") >= 0) {
             $(k).before("<span style='border-radius:3;margin-right:-50px;background-color:rgba(182,24,32,0.5)' title='" + JSON.stringify(spec.results_.items_[0].actual)+ "'> <span style='color:rgb(255,255,255);font-weight:bold'>FAIL</span> </span> ")
         } else {
             $(k).before("<span style='border-radius:3;margin-right:-50px;background-color:rgba(182,24,32,0.5)' title='" + JSON.stringify(spec.results_.items_[0].actual)+ "'> <span style='color:rgb(255,255,255);font-weight:bold'>FAIL</span> </span> ")
         }
     }
 };
 
 jasmine.FormalReporter.prototype.log = function() {
 };
 
 jasmine.FormalReporter.prototype.getLocation = function() {
   return this.document.location;
 };
 
 jasmine.FormalReporter.prototype.specFilter = function(spec) {
   var paramMap = {};
   var params = this.getLocation().search.substring(1).split('&');
   for (var i = 0; i < params.length; i++) {
     var p = params[i].split('=');
     paramMap[decodeURIComponent(p[0])] = decodeURIComponent(p[1]);
   }
 
   if (!paramMap.spec) {
     return true;
   }
   return spec.getFullName().indexOf(paramMap.spec) === 0;
 };
 
})();var j=void 0,l=!0;function m(i){return i instanceof Array}function v(){throw"Pattern Match Exhausted";}
var z=new function(){function i(a){var b;0===a?b=0:1===a?b=1:(b=i(a-1),a=i(a-2),b+=a);return b}function n(a){return function(b){var k=a,c;if(k===b)return l;k=a;c=b;if("object"===typeof k){var d=l,h;for(h in k)d=d&&c.hasOwnProperty(h)&&n(k[h])(c[h]);k=Object.keys(k).length===Object.keys(c).length;return d&&k}k=a;c=b;if(m(k)){h=l;for(d in k)h=h&&n(k[d])(c[d]);return h&&k.length==c.length}return!1}}function s(a){return function(){return a}}this.object_=function(a){return"object"===typeof a};this.array_=
m;this.string_=function(a){return"string"===typeof a};this.num_=function(a){return"number"==typeof a};this.type_=function(a){return typeof a};this.not=function(a){return!a};this._grea_grea_eq=function(a){return function(b){return b(a())}};this._grea_grea=function(a){return function(b){return function(){a();return b()}}};this._return_=s;this.log=function(a){return function(){return console.log(a)}};this._and_and=function(a){return function(b){return a&&b}};this._or_or=function(a){return function(b){return a||
b}};this._star=function(a){return function(b){return a*b}};this._forw=function(a){return function(b){return a/b}};this._perc=function(a){return function(b){return a%b}};this._plus=function(a){return function(b){return a+b}};this._minu=function(a){return function(b){return a-b}};this._less_eq=function(a){return function(b){return a<=b}};this._grea_eq=function(a){return function(b){return a>=b}};this._less=function(a){return function(b){return a<b}};this._grea=function(a){return function(b){return a>
b}};this._bang_eq=function(a){return function(b){return!n(a)(b)}};this._forw_eq=function(a){return function(b){return!n(a)(b)}};this._eq_eq=n;this.fib=i;this.speedtest=new function(){function a(b){return 0===b?0:1===b?1:a(b-1)+a(b-2)}function b(){return(new Date).getTime()}this.get_time=b;this.time=function(a){return function(){var c=b();a();return b()-c}};this.fast_fib=a;this.floor=Math.floor};this._less_or=function(a){return function(b){return a(b)}};this._or_grea=function(a){return function(b){return b(a)}};
this._less_col=function(a){return function(b){return a(b)}};this._comp_col=function(a){return function(b){return function(c){return a(b(c))}}};this.id=function(a){return a};this.flip=function(a){return function(b){return function(c){return a(c)(b)}}};this._apos=function(a){return function(b){return b(a)}};this.string=new function(){function a(a){return a.replace(/\s+$/,"")}function b(a){return a.replace(/^\s+/,"")}this.lstrip=b;this.rstrip=a;this.strip=function(c){return b(a(c))};this.length=function(a){return a.length};
this._plus_plus_plus=function(a){return function(b){return""+a+b}}};this.err=function(a){var b;try{a(),b=!1}catch(c){b=c}return b};this.option=new function(){this.option=function(a){return function(b){if(b.hasOwnProperty("none"))return a;var c=b.some;if(b.hasOwnProperty("some"))return c;v()}}};this.html=new function(){function a(a){return function(b){return function(){return a.push(b)}}}function b(a){return function(b){return b.split(a)}}function c(a){return JSON.stringify(a)}function p(a){return function(b){return function(){return $(b.element).append($(a.element).detach())}}}
function d(a){return function(){var b=$(a).get(0);return{add_class:function(a){return function(){return b.setAttribute("class",b.getAttribute("class")+" "+a)}},add_style:function(a){return function(c){return function(){b.style[a]=c}}},element:b,inner:function(){return b.innerHTML},on_click:function(a){return function(){b.onclick=a}},set:function(a){return function(){b.innerHTML=a}}}}}this.get=d;this.$_eq=function(a){return function(b){return function(){if("undefined"!=typeof $){var c=$(a).get(0);
"undefined"!=typeof c&&(c.innerHTML=b)}}}};var h;this.$_or=h=function(a){return function(b){return function(c){return function(){return $(a).css(b,c)}}}};this.$_comp=function(a){return function(b){return function(){return $(a).addClass(b)}}};this.$_plus=function(a){return function(b){return function(){return $(a).append(b)}}};this.div=function(a){return function(){return"<div id='"+a+"'/>"}};this.move=p;this.on_load=function(a){return function(){return window.addEventListener("load",a,!1)}};this.stringify=
c;this._bang_bang=function(a){return function(b){return a[b]}};this.with_page=function(a){return function(){var b=$("body").clone(),c=a();$("body").replaceWith(b);return c}};this.split=b;var r=0,i={reportRunnerResults:function(){return phantom.exit(r)},reportSpecResults:function(a){if(a.results().passed())var f={},a=function(){return f};else{var g=a.results_.items_,d;d=a.description.split("__::__")[1];var x;x=JSON.stringify(g[0].expected);var y;y=JSON.stringify(g[0].actual);var t,a=b("__::__")(a.description),
a=b("_")(a[0])[0];t=c(parseInt(a)+1);a=function(){var a;if(n(r)(0))a=function(){return console.log("\r                        ")};else{var b={};a=function(){return b}}a();r=1;console.log("Test failed at line "+t+("\n\n"+d+("\n\n    Expected "+x+("\n    Actual   "+y+""))));return console.log("")}}return a()}};this.console_runner=function(){var a=jasmine.getEnv();a.addReporter(i);return a.execute()};this.push=a;var q={failed:0,messages:[],reportRunnerResults:function(){var a;if(0<q.failed){var b=q.messages;
a=function(){return console.log(b)}}else{var c={};a=function(){return c}}a();return console.log(""+(q.total-q.failed)+("/"+q.total+" tests passed"))},reportSpecResults:function(b){var c=b.results().passed();q.total++;if(c)var g={},c=function(){return g};else c=function(){q.failed++;a(q.messages)(b.description)();return{}};return c()},total:0};this.console_reporter=q;this.table_of_contents=function(){$("code").addClass("prettyprint");$("code").addClass("lang-hs");h(".test")("position")("relative")();
h(".test")("left")("50px")();prettyPrint();var a=new jasmine.TrivialReporter,b=new jasmine.FormalReporter,c=jasmine.getEnv();c.addReporter(a);c.addReporter(b);c.addReporter(q);c.execute();a=d(".jasmine_reporter")();b=d("#test_suite")();return p(a)(b)()}};var c=new function(){function a(a){return function(b){function t(c){if(c.hasOwnProperty("nil"))return b;var f=c.head,g=c.tail;if(c.hasOwnProperty("head")&&c.hasOwnProperty("tail"))return a(f)(t(g));v()}return t}}function b(a){return function(b){if(b.hasOwnProperty("nil"))throw"Foldl1 called on empty list";
return c(a)(g(b))(f(b))}}function c(a){return function(b){return function(c){for(var e=j,f=b;"undefined"==typeof e;){var g=f;if(c.hasOwnProperty("nil"))e=g;else{var g=f,d=c.head,p=c.tail;c.hasOwnProperty("head")&&c.hasOwnProperty("tail")?(f=a(g)(d),c=p,e=j):v()}}return e}}}function p(a){for(var b=j,c={nil:l};"undefined"==typeof b;){var e=c;if(a.hasOwnProperty("nil"))b=e;else{var e=c,f=a.head,g=a.tail;a.hasOwnProperty("head")&&a.hasOwnProperty("tail")?(c={head:f,tail:e},a=g,b=j):v()}}return b}function d(a){return function(b){var c=
a;if(b.hasOwnProperty("nil"))return{nil:l};var c=a,e=c(g(b)),b=d(c)(f(b));return{head:e,tail:b}}}function h(a){return function(b){var c=a;if(b.hasOwnProperty("nil"))return{nil:l};var c=a,e=b;if(c(g(e)))return b=g(e),c=h(c)(f(e)),{head:b,tail:c};c=a;c=h(c);b=f(b);return c(b)}}function r(a){return function(b){var c=b;if(a.hasOwnProperty("nil"))return c;var c=a.head,e=a.tail;if(a.hasOwnProperty("head")&&a.hasOwnProperty("tail"))return b=r(e)(b),{head:c,tail:b};v()}}function i(a){return function(b){if(0===
a)b={nil:l};else var c=i(a-1)(b),b={head:b,tail:c};return b}}function q(a){if(a.hasOwnProperty("nil"))return 0;var b=a.tail;if(a.hasOwnProperty("head")&&a.hasOwnProperty("tail"))return 1+q(b);v()}function n(a){return function(b){var c=b;if(0===a)return{nil:l};c=b;b=g(c);c=n(a-1)(f(c));return{head:b,tail:c}}}function f(a){var b=a.tail;if(a.hasOwnProperty("head")&&a.hasOwnProperty("tail"))return b;if(a.hasOwnProperty("nil"))throw"Tail called on empty list";v()}function g(a){var b=a.head;if(a.hasOwnProperty("head")&&
a.hasOwnProperty("tail"))return b;if(a.hasOwnProperty("nil"))throw"Head called on empty list";v()}this._col_col=function(a){return function(b){return{head:a,tail:b}}};this.empty_=function(a){return a.hasOwnProperty("nil")?l:!1};this.head=g;this.tail=f;this.last=function(a){for(var b=j;"undefined"==typeof b;){var c=a.head;if(a.hasOwnProperty("head")&&a.hasOwnProperty("tail")&&a.tail.hasOwnProperty("nil"))b=c;else if(c=a.tail,a.hasOwnProperty("head")&&a.hasOwnProperty("tail"))a=c,b=j;else{if(a.hasOwnProperty("nil"))throw"Last called on empty list";
v()}}return b};this.take=n;this.drop=function(a){return function(b){for(var c=j,e=a;"undefined"==typeof c;)c=b,0!==e&&(c=b,e-=1,b=f(c),c=j);return c}};this._comp_comp=function(a){return function(b){for(var c=j,e={nil:l};"undefined"==typeof c;){var c=b,f=e;c>=a?(b=c-1,e={head:c,tail:f},c=j):c=f=e}return c}};this.take_while=function(a){return function(b){var c=a;if(b.hasOwnProperty("nil"))return{nil:l};var c=a,e;c(g(b))?(e=g(b),b=h(c)(f(b)),e={head:e,tail:b}):e={nil:l};return e}};this.drop_while=function(a){return function(b){for(var c=
j,e=a;"undefined"==typeof c;)if(c=e,b.hasOwnProperty("nil"))c={nil:l};else{var c=e,d=b;c(g(d))?(e=c,b=f(d),c=j):c=d=b}return c}};this.length=q;this.init=i;this._plus_plus=r;this.filter=h;this.map=d;this.reverse=p;this.take_apos=function(a){return function(b){for(var c=j,e=a,d={nil:l};"undefined"==typeof c;)if(c=d,0!==e)var h=b,c=d,e=e-1,b=f(h),d={head:g(h),tail:c},c=j;return p(c)}};this.foldl=c;this.foldl1=b;this.foldr=a;this.foldr1=function(b){return function(c){if(c.hasOwnProperty("nil"))throw"Foldr1 called on empty list";
return a(b)(g(c))(f(c))}};this.all_=function(a){var c=b(function(a){return function(b){return a&&b}}),f=d(a);return function(a){return c(f(a))}};this.any_=function(a){var c=b(function(a){return function(b){return a||b}}),f=d(a);return function(a){return c(f(a))}};this.sum=b(function(a){return function(b){return a+b}});this.product=b(function(a){return function(b){return a*b}});var w=b(function(a){return function(b){return r(a)(b)}});this.concat=w;this.concat_map=function(a){return function(b){return w(d(a)(b))}};
this.maximum=b(function(a){return function(b){return a>b?a:b}});this.minimum=b(function(a){return function(b){return a>b?b:a}})};this.list=c;this.seq=new function(){function a(b){if(b.hasOwnProperty("end"))return{end:l};var c=b.seq;if(b.hasOwnProperty("seq")){var d=j;return{seq:function(){if(!d){var b;b=c();var f=b.elem,p=b.next;if(b.hasOwnProperty("elem")&&b.hasOwnProperty("next")){var e={elem:f,next:a(p)};b=function(){return e}}else v(),b=j;d=b()}return d}}}v()}function b(a){return function(c){return function(d){if(c.hasOwnProperty("end")||
d.hasOwnProperty("end"))return{end:l};var p=c.seq,h=d.seq;if(c.hasOwnProperty("seq")&&d.hasOwnProperty("seq"))return{seq:function(){var c;var d=p();c=d.elem;var g=d.next;if(d.hasOwnProperty("elem")&&d.hasOwnProperty("next")){var d=h(),k=d.elem,i=d.next;if(d.hasOwnProperty("elem")&&d.hasOwnProperty("next")){var n={elem:a(c)(k),next:b(a)(g)(i)};c=function(){return n}}else v(),c=j}else v(),c=j;return c()}};v()}}}function k(a){if(a.hasOwnProperty("end"))return{nil:l};var b=a.seq;if(a.hasOwnProperty("seq")){var b=
b(),a=b.elem,c=b.next;if(b.hasOwnProperty("elem")&&b.hasOwnProperty("next")){var d,b=k(c);d={head:a,tail:b};a=function(){return d}}else v(),a=j;return a()}v()}function p(a){if(a.hasOwnProperty("nil"))return{end:l};var b=a.head,c=a.tail;if(a.hasOwnProperty("head")&&a.hasOwnProperty("tail"))return{seq:function(){return{elem:b,next:p(c)}}};v()}function d(a){return function(b){return{seq:function(){return{elem:b,next:d(a)(a(b))}}}}}var h=c.tail||window.tail,i=c.take||window.take;this.seq=function(a){return{seq:a}};
this.iterate=d;this.from_list=p;this.to_list=k;this.take=i=function(a){return function(b){if(b.hasOwnProperty("end")||0===a)return{end:l};var c=b.seq;if(b.hasOwnProperty("seq"))return{seq:function(){var b;b=c();var d=b.elem,p=b.next;if(b.hasOwnProperty("elem")&&b.hasOwnProperty("next")){var e={elem:d,next:i(a-1)(p)};b=function(){return e}}else v(),b=j;return b()}};v()}};this.zip_with=b;this._col_col_col=function(a){return function(b){return{seq:function(){return{elem:a,next:b()}}}}};this.tail=h=function(a){if(a.hasOwnProperty("end"))throw"tail called on empty seq";
var b=a.seq;if(a.hasOwnProperty("seq"))return b().next;v()};var n=this.to_lazy=a,q=s({seq:function(){var a=b(function(a){return function(b){return a+b}})(u),c=h(u);return{elem:1,next:a(c)}}}),u;this.fibs=u=n({seq:function(){return{elem:1,next:q()}}})};this.Formal_Z=new function(){var a=c.map||window.map,b=c.concat_map||window.concat_map;this.map=a=function(a){return function(b){return function(c){return a.map(c)(b)}}};this.bind=function(a){return function(b){var c=a.ret;if(a.hasOwnProperty("ret"))return c(b);
v()}};var k={map:function(a){return function(b){if(b.hasOwnProperty("nil"))return{nil:l};var c=b.head,i=b.tail;if(b.hasOwnProperty("head")&&b.hasOwnProperty("tail"))return{head:a(c),tail:k.map(a)(i)};v()}}};this.list_functor=k;this.list_monad={_grea_grea_eq:function(a){return function(c){return b(c)(a)}},_return_:function(a){return{head:a,tail:{nil:l}}}};this.js_monad={_grea_grea_eq:function(a){return function(b){return b(a())}},_return_:function(a){return function(){return a}}}}};
("undefined"==typeof global?window:global).prelude=z;
("undefined"==typeof global?window:global).readme=new function(){function i(c){return Math.sqrt(c)}function n(c){var a;0===c?a=0:1===c?a=1:(a=n(c-1),c=n(c-2),a+=c);return a}var s=z.fib||window.fib;this.square=function(c){return c*c};this.add=function(c){return function(a){return c+a}};this.fib=s=function(c){var a;0===c?a=0:1===c?a=1:(a=s(c-1),c=s(c-2),a+=c);return a};this.fib_apos=n;this.person=function(c){return function(a){return{address:a,message:""+c+(" lives at "+a+""),name:c}}};this.point={x:10,
y:10};this.magnitude=function(c){var a=c.x,b=c.y;if(c.hasOwnProperty("x")&&c.hasOwnProperty("y"))return i(a*a+b*b);v()};this._star_star=function(c){return function(a){for(var b=j,k=c,i=a,a="";"undefined"==typeof b;)if(b=a,0!==i)var d=k,b=a,k=d,i=i-1,a=""+b+d,b=j;return b}};this.map_excl=function(c){return function(a){return a.map(c)}};this.hello_world=function(){console.log("Hello World");return Math.sqrt(9)+1+1};this.sqrt=i;this.num_or_string=function(c){return"number"==typeof c?"Num":"String"};
this.maybe=function(c){return function(a){var b=c,b=a.just;if(a.hasOwnProperty("just"))return b;b=c;if(a.hasOwnProperty("nothing"))return b;v()}};this.has_value=function(c){return c.hasOwnProperty("just")?l:!1}};
var is_array;is_array=function(f){return f instanceof Array};var __undefined__;__undefined__="undefined";var run;run=function(f){return f()};var error;error=function(f){throw f;};var exhaust;exhaust=function(){error("Pattern Match Exhausted")};var __check;__check=function(f,e){return f.hasOwnProperty(e)};
describe("",function(){describe("prelude",function(){var f;f=prelude.array_;var e;e=prelude._eq_eq;var k;k=prelude.fib;var j;j=prelude.speedtest;var n;n=prelude.id;var r;r=prelude.err;var h;h=prelude.list;f=prelude.array_;e=prelude._eq_eq;k=prelude.fib;j=prelude.speedtest;n=prelude.id;r=prelude.err;h=prelude.list;new function(){it("26_26__::__        not false",function(){expect(function(){try{var a;a=run(function(){return run(function(){return!0})});return a}catch(b){return{error:b}}}()).toEqual(!0)});
it("29_29__::__        object? {}",function(){expect(function(){try{var a;var b={};a=run(function(){return run(function(){return"object"===typeof b})});return a}catch(c){return{error:c}}}()).toEqual(!0)});it("30_30__::__        array? []",function(){expect(function(){try{return f([])}catch(a){return{error:a}}}()).toEqual(!0)});it("31_31__::__        not (array? {})",function(){expect(function(){try{var a;var b=f({});a=run(function(){return run(function(){return!b})});return a}catch(c){return{error:c}}}()).toEqual(!0)});
it("32_32__::__        not (object? 0)",function(){expect(function(){try{var a;a=run(function(){return run(function(){return!1})});var b;b=run(function(){return run(function(){return!a})});return b}catch(c){return{error:c}}}()).toEqual(!0)});it("53_56multi__::__        do! x   <- `1 + 4`\n            y   <- `2 + 3`\n            ans <- `x + y`\n            return (10 == ans)",function(){expect(function(){try{return run(function(){var a=run,c=run(function(){return 5}),d=run(function(){return 5}),g=
run(function(){return c+d}),i=e(10)(g);return a(function(){return i})})}catch(a){return{error:a}}}()).toEqual(!0)});it("58_58__::__        5  == do! return 5",function(){expect(5).toEqual(run(function(){return run(function(){return 5})}))});it("59_59__::__        10 == do! `5 + 5`",function(){expect(10).toEqual(run(function(){return run(function(){return 10})}))});it("70_73multi__::__        var x = 0\n            y = do z <- `x = 1`\n                   return z\n        x == 0",function(){expect(function(){try{return e(0)(0)}catch(a){return{error:a}}}()).toEqual(!0)});
it("129_129__::__        (3 * 4) + 5 * 4 == 64 / 2",function(){expect(function(a){return function(b){return run(function(){return run(function(){return a+b})})}}(function(a){return function(b){return run(function(){return run(function(){return a*b})})}}(3)(4))(function(a){return function(b){return run(function(){return run(function(){return a*b})})}}(5)(4))).toEqual(function(a){return function(b){return run(function(){return run(function(){return a/b})})}}(64)(2))});it("130_130__::__        4 - 1 != 5 - 10",
function(){expect(function(){try{var a;a=run(function(){return run(function(){return 3})});var b=run(function(){return run(function(){return-5})}),c=e(a)(b);return run(function(){return run(function(){return!c})})}catch(d){return{error:d}}}()).toEqual(!0)});it("131_131__::__        (10 >= 5 + 5) != (4 + 5 <= 10 - 2)",function(){expect(function(){try{var a,b=run(function(){return run(function(){return 10})});a=run(function(){return run(function(){return 10>=b})});var c;c=run(function(){return run(function(){return 9})});
var d=run(function(){return run(function(){return 8})}),g=run(function(){return run(function(){return c<=d})}),i=e(a)(g);return run(function(){return run(function(){return!i})})}catch(l){return{error:l}}}()).toEqual(!0)});it("132_132__::__        ({test: 1} == {test: 1}) == true",function(){expect(e({test:1})({test:1})).toEqual(!0)});it("133_133__::__        ({test: 1} != {test: 1}) == false",function(){expect(function(a){return function(b){var c=e(a)(b);return run(function(){return run(function(){return!c})})}}({test:1})({test:1})).toEqual(!1)});
describe("speedtest",function(){var a;a=prelude.speedtest.time;var b;b=prelude.speedtest.fast_fib;var c;c=prelude.speedtest.floor;a=prelude.speedtest.time;b=prelude.speedtest.fast_fib;c=prelude.speedtest.floor;new function(){it("165_165__::__            fast_fib 7 == fib 7",function(){expect(b(7)).toEqual(k(7))});it("174_176multi__::__            do! fast_time <- time yield fast_fib 30\n                slow_time <- time yield fib 30\n                return (floor (fast_time / slow_time * 100) >= 80)",
function(){expect(function(){try{return run(function(){var d=run,i=a(function(){return b(30)}),l=run(i),i=a(function(){return k(30)}),p=run(i),i=c,e;e=run(function(){return run(function(){return l/p})});var q;q=run(function(){return run(function(){return 100*e})});var m=i(q),s;s=run(function(){return run(function(){return 80<=m})});return d(function(){return s})})}catch(d){return{error:d}}}()).toEqual(!0)})}});it("185_185__::__        3 |> (\u03bby = y + 1) |> \u03bby = y + 1 == 5",function(){expect(function(){try{var a;
a=run(function(){return run(function(){return 4})});var b=e,c;c=run(function(){return run(function(){return a+1})});return b(c)(5)}catch(d){return{error:d}}}()).toEqual(!0)});it("186_186__::__        (\u03bby x z = x + y + z + 1) 1 <| 3 <| 4 == 9",function(){expect(function(a){return function(b){return a(b)}}(function(a){return function(b){return a(b)}}(function(a){return function(b){return function(c){var d;d=run(function(){return run(function(){return b+a})});var g;g=run(function(){return run(function(){return d+
c})});return run(function(){return run(function(){return g+1})})}}}(1))(3))(4)).toEqual(9)});it("193_193__::__        (\u03bbx = x - 3) <: (\u03bbx = x - 3) <: 5 + 5 == 4",function(){expect(function(a){return function(b){return a(b)}}(function(a){return run(function(){return run(function(){return a-3})})})(function(a){return function(b){return a(b)}}(function(a){return run(function(){return run(function(){return a-3})})})(function(a){return function(b){return run(function(){return run(function(){return a+
b})})}}(5)(5)))).toEqual(4)});it("204_204__::__        ((\u03bbx = x + 1) .: (\u03bbx = x * 2) .: \u03bbx = x - 3) 4 == 3",function(){expect(function(a){return function(b){return function(c){return a(b(c))}}}(function(a){return run(function(){return run(function(){return a+1})})})(function(a){return function(b){return function(c){return a(b(c))}}}(function(a){return run(function(){return run(function(){return 2*a})})})(function(a){return run(function(){return run(function(){return a-3})})}))(4)).toEqual(3)});
it("205_205__::__        id [1, 2, 3] == [1, 2, 3]",function(){expect([1,2,3]).toEqual([1,2,3])});it("206_206__::__        flip (\u03bbx y = x - y) 3 5 == 2",function(){expect(function(a){return function(b){return function(c){return a(c)(b)}}}(function(a){return function(b){return run(function(){return run(function(){return a-b})})}})(3)(5)).toEqual(2)});describe("string",function(){var a;a=a=prelude.string.strip;new function(){it('228_228__::__            strip "    test    " is "test"',function(){expect(a("    test    ")).toEqual("test")});
it('232_233multi__::__            let x = "test"\n            in "hello `x`" is "hello test"',function(){expect(function(){try{var a=e,c;c=run(function(){return run(function(){return"hello test"})});var d;d=run(function(){return run(function(){return""+c+""})});return a(d)("hello test")}catch(g){return{error:g}}}()).toEqual(!0)})}});describe("option",function(){var a;a=a=prelude.option.option;new function(){it("258_258__::__            option 3 {some: 2} == 2",function(){expect(a(3)({some:2})).toEqual(2)})}});
describe("html",function(){var a;a=prelude.html.get;var b;b=prelude.html.div;a=prelude.html.get;b=prelude.html.div;new function(){it('331_341multi__::__            do! d <- div "test1"\n    \n                "body"   $+ d\n                "#test1" $= "I am a test!"\n    \n                text <- get "#test1"\n                text <- text.inner\n    \n                "#test1" $= ""\n    \n                return (text == "I am a test!")',function(){expect(function(){try{return run(function(){var c=
run,g=b("test1"),i=run(g);run(function(){return $("body").append(i)});run(function(){if("undefined"!=typeof $){var a;a=$("#test1").get(0);"undefined"!=typeof a&&(a.innerHTML="I am a test!")}});g=a("#test1");g=run(g).inner;g=run(g);run(function(){if("undefined"!=typeof $){var a;a=$("#test1").get(0);"undefined"!=typeof a&&(a.innerHTML="")}});var l=e(g)("I am a test!");return c(function(){return l})})}catch(c){return{error:c}}}()).toEqual(!0)})}});describe("list",function(){var a;a=prelude.list.empty_;
var b;b=prelude.list.head;var c;c=prelude.list.tail;var d;d=prelude.list.last;var g;g=prelude.list.take;var i;i=prelude.list.drop;var l;l=prelude.list._comp_comp;var p;p=prelude.list.take_while;var u;u=prelude.list.drop_while;var q;q=prelude.list.length;var m;m=prelude.list.init;var s;s=prelude.list._plus_plus;var f;f=prelude.list.filter;var h;h=prelude.list.map;var j;j=prelude.list.reverse;var k;k=prelude.list.take_apos;var x;x=prelude.list.foldl;var y;y=prelude.list.foldr;var t;t=prelude.list.all_;
var v;v=prelude.list.any_;var w;w=prelude.list.sum;var z;z=prelude.list.product;var A;A=prelude.list.concat;var B;B=prelude.list.concat_map;var C;C=prelude.list.maximum;var D;D=prelude.list.minimum;a=prelude.list.empty_;b=prelude.list.head;c=prelude.list.tail;d=prelude.list.last;g=prelude.list.take;i=prelude.list.drop;l=prelude.list._comp_comp;p=prelude.list.take_while;u=prelude.list.drop_while;q=prelude.list.length;m=prelude.list.init;s=prelude.list._plus_plus;f=prelude.list.filter;h=prelude.list.map;
j=prelude.list.reverse;k=prelude.list.take_apos;x=prelude.list.foldl;y=prelude.list.foldr;t=prelude.list.all_;v=prelude.list.any_;w=prelude.list.sum;z=prelude.list.product;A=prelude.list.concat;B=prelude.list.concat_map;C=prelude.list.maximum;D=prelude.list.minimum;new function(){it("481_495multi__::__            var xs = [:\n    \n                [:1,2,3]\n    \n                [:1,2,3:]\n    \n                (1::2::3::{nil})\n    \n                { head = 1\n                  tail = { head = 2\n                           tail = { head = 3\n                                    tail = {nil} }}}\n            ]\n    \n            all? (\u03bby = [:1,2,3] == y) xs",
function(){expect(function(){try{return t(function(a){return e({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})(a)})({head:{head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}},tail:{head:{head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}},tail:{head:{head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}},tail:{head:{head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}},tail:{nil:!0}}}}})}catch(a){return{error:a}}}()).toEqual(!0)});it("522_522__::__            1 .. 5 == [:1,2,3,4,5]",function(){expect(l(1)(5)).toEqual({head:1,
tail:{head:2,tail:{head:3,tail:{head:4,tail:{head:5,tail:{nil:!0}}}}}})});it("526_526__::__            288045 == 1 .. 1111 |> filter (\u03bbx = x % 3 == 0 || x % 5 == 0) |> sum",function(){expect(288045).toEqual(function(a){return function(b){return b(a)}}(function(a){return function(b){return b(a)}}(l(1)(1111))(f(function(a){var b=e,c;c=run(function(){return run(function(){return a%3})});var d=b(c)(0),b=e;c=run(function(){return run(function(){return a%5})});var g=b(c)(0);return run(function(){return run(function(){return d||
g})})})))(w))});it("537_537__::__            not (empty? (1 :: {nil}))",function(){expect(function(){try{var b;var c=a({head:1,tail:{nil:!0}});b=run(function(){return run(function(){return!c})});return b}catch(d){return{error:d}}}()).toEqual(!0)});it("538_538__::__            empty? [:]",function(){expect(function(){try{return a({nil:!0})}catch(b){return{error:b}}}()).toEqual(!0)});it("540_540__::__            head [: 1, 2 ] is 1",function(){expect(b({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual(1)});
it("541_541__::__            tail [: 1, 2 ] is [:2]",function(){expect(c({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual({head:2,tail:{nil:!0}})});it("542_542__::__            last [: 1, 2 ] is 2",function(){expect(d({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual(2)});it('544_544__::__            err (lazy head {nil}) is "Head called on empty list"',function(){expect(r(function(){var a;a=void 0;return function(){a||(a=b({nil:!0}));return a}}())).toEqual("Head called on empty list")});it('545_545__::__            err (lazy tail {nil}) is "Tail called on empty list"',
function(){expect(r(function(){var a;a=void 0;return function(){a||(a=c({nil:!0}));return a}}())).toEqual("Tail called on empty list")});it('546_546__::__            err (lazy last {nil}) is "Last called on empty list"',function(){expect(r(function(){var a;a=void 0;return function(){a||(a=d({nil:!0}));return a}}())).toEqual("Last called on empty list")});it("548_548__::__            take(2, [: 1, 2, 3 ]) == [: 1, 2 ]",function(){expect(g(2)({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual({head:1,
tail:{head:2,tail:{nil:!0}}})});it("549_549__::__            drop(2, [: 1, 2, 3 ]) == [: 3 ]",function(){expect(i(2)({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual({head:3,tail:{nil:!0}})});it("551_551__::__            take_while (\u03bbx = x < 0) [:] == [:]",function(){expect(p(function(a){return run(function(){return run(function(){return 0>a})})})({nil:!0})).toEqual({nil:!0})});it("552_552__::__            take_while (\u03bbx = x > 0) [: 2, 1, 0 ] == [: 2, 1 ]",function(){expect(p(function(a){return run(function(){return run(function(){return 0<
a})})})({head:2,tail:{head:1,tail:{head:0,tail:{nil:!0}}}})).toEqual({head:2,tail:{head:1,tail:{nil:!0}}})});it("554_554__::__            drop_while (\u03bbx = x < 0) {nil} == {nil}",function(){expect(u(function(a){return run(function(){return run(function(){return 0>a})})})({nil:!0})).toEqual({nil:!0})});it("555_555__::__            drop_while (\u03bbx = x > 0) [: 2, 1, 0 ] == [: 0 ]",function(){expect(u(function(a){return run(function(){return run(function(){return 0<a})})})({head:2,tail:{head:1,
tail:{head:0,tail:{nil:!0}}}})).toEqual({head:0,tail:{nil:!0}})});it("564_564__::__            length [: 1, 2, 3, 4 ] == 4",function(){expect(q({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual(4)});it("571_571__::__            length (init 30 0) == 30",function(){expect(q(m(30)(0))).toEqual(30)});it("572_572__::__            tail (init 3 0)    == init 2 0",function(){expect(c(m(3)(0))).toEqual(m(2)(0))});it("581_581__::__            {nil} ++ (1 :: 2 :: {nil}) == 1 :: 2 :: {nil}",
function(){expect(s({nil:!0})(function(a){return function(b){return{head:a,tail:b}}}(1)(function(a){return function(b){return{head:a,tail:b}}}(2)({nil:!0})))).toEqual(function(a){return function(b){return{head:a,tail:b}}}(1)(function(a){return function(b){return{head:a,tail:b}}}(2)({nil:!0})))});it("582_582__::__            [: 1, 2 ] ++ [: 3, 4 ] == [: 1, 2, 3, 4 ]",function(){expect(s({head:1,tail:{head:2,tail:{nil:!0}}})({head:3,tail:{head:4,tail:{nil:!0}}})).toEqual({head:1,tail:{head:2,tail:{head:3,
tail:{head:4,tail:{nil:!0}}}}})});it("591_591__::__            [: 1, 2, 3, 4 ] 'filter (\u03bbx = x > 2) == [: 3, 4 ]",function(){expect(function(a){return function(b){return b(a)}}({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})(f(function(a){return run(function(){return run(function(){return 2<a})})}))).toEqual({head:3,tail:{head:4,tail:{nil:!0}}})});it("598_598__::__            [: 2, 3, 4 ] == [: 1, 2, 3 ] |> map \u03bbx = x + 1",function(){expect({head:2,tail:{head:3,tail:{head:4,
tail:{nil:!0}}}}).toEqual(function(a){return function(b){return b(a)}}({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})(h(function(a){return run(function(){return run(function(){return a+1})})})))});it("609_609__::__            reverse [: 1, 2, 3, 4 ] == [: 4, 3, 2, 1 ]",function(){expect(j({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual({head:4,tail:{head:3,tail:{head:2,tail:{head:1,tail:{nil:!0}}}}})});it("611_612multi__::__            var test_x = [: 1, 2, 3, 4 ]\n            test_x == reverse <| reverse test_x",
function(){expect(function(){try{var a;a={head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}};var b=e(a),c=j,d,g=j(a);d=c(g);return b(d)}catch(i){return{error:i}}}()).toEqual(!0)});it("620_621multi__::__            var x = [: 1, 2, 3, 4, 5, 6, 7, 8 ]\n            take 5 x == take' 5 x",function(){expect(function(){try{var a;a={head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{head:5,tail:{head:6,tail:{head:7,tail:{head:8,tail:{nil:!0}}}}}}}}};return e(g(5)(a))(k(5)(a))}catch(b){return{error:b}}}()).toEqual(!0)});
it("655_655__::__            foldl (\u03bbx y = x + y) 0 [: 1, 2, 3, 4 ] == 10",function(){expect(x(function(a){return function(b){return run(function(){return run(function(){return a+b})})}})(0)({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})).toEqual(10)});it("656_656__::__            foldr (\u03bbx y = x + y) 0 [: 1, 2, 3, 4 ] == 10",function(){expect(y(function(a){return function(b){return run(function(){return run(function(){return a+b})})}})(0)({head:1,tail:{head:2,tail:{head:3,
tail:{head:4,tail:{nil:!0}}}}})).toEqual(10)});it("657_657__::__            all? id [:true,true]",function(){expect(function(){try{return t(n)({head:!0,tail:{head:!0,tail:{nil:!0}}})}catch(a){return{error:a}}}()).toEqual(!0)});it("658_658__::__            not (all? id [:true,false])",function(){expect(function(){try{var a;var b=t(n)({head:!0,tail:{head:!1,tail:{nil:!0}}});a=run(function(){return run(function(){return!b})});return a}catch(c){return{error:c}}}()).toEqual(!0)});it("659_659__::__            any? id [:true,false]",
function(){expect(function(){try{return v(n)({head:!0,tail:{head:!1,tail:{nil:!0}}})}catch(a){return{error:a}}}()).toEqual(!0)});it("660_660__::__            not (any? id [:false,false])",function(){expect(function(){try{var a;var b=v(n)({head:!1,tail:{head:!1,tail:{nil:!0}}});a=run(function(){return run(function(){return!b})});return a}catch(c){return{error:c}}}()).toEqual(!0)});it("661_661__::__            sum [:1,2,3] == 6",function(){expect(w({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual(6)});
it("662_662__::__            product [:1,2,4] == 8",function(){expect(z({head:1,tail:{head:2,tail:{head:4,tail:{nil:!0}}}})).toEqual(8)});it("664_665multi__::__            let x = [:1,2], y = [:3,4]\n            concat [:x,y] == [:1,2,3,4]",function(){expect(function(){try{return e(A({head:{head:1,tail:{head:2,tail:{nil:!0}}},tail:{head:{head:3,tail:{head:4,tail:{nil:!0}}},tail:{nil:!0}}}))({head:1,tail:{head:2,tail:{head:3,tail:{head:4,tail:{nil:!0}}}}})}catch(a){return{error:a}}}()).toEqual(!0)});
it("667_667__::__            concat_map (\u03bbx = [:x,x+1]) [:1,2] == [:1,2,2,3]",function(){expect(B(function(a){var b;b=run(function(){return run(function(){return a+1})});return{head:a,tail:{head:b,tail:{nil:!0}}}})({head:1,tail:{head:2,tail:{nil:!0}}})).toEqual({head:1,tail:{head:2,tail:{head:2,tail:{head:3,tail:{nil:!0}}}}})});it("669_669__::__            minimum [: 1, 2, 3 ] == 1",function(){expect(D({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual(1)});it("670_670__::__            maximum [: 1, 2, 3 ] == 3",
function(){expect(C({head:1,tail:{head:2,tail:{head:3,tail:{nil:!0}}}})).toEqual(3)})}});describe("seq",function(){var a;a=prelude.seq.iterate;var b;b=prelude.seq.from_list;var c;c=prelude.seq.to_list;var d;d=prelude.seq.take;var g;g=prelude.seq.fibs;var i;i=h.last||window.last;d=h.take||window.take;var e;e=h.length||window.length;var p;p=j.time||window.time;var f;f=j.fast_fib||window.fast_fib;var q;q=j.floor||window.floor;a=prelude.seq.iterate;b=prelude.seq.from_list;c=prelude.seq.to_list;d=prelude.seq.take;
g=prelude.seq.fibs;new function(){it("706_706__::__            to_list (from_list [:1,2]) == [:1,2]",function(){expect(c(b({head:1,tail:{head:2,tail:{nil:!0}}}))).toEqual({head:1,tail:{head:2,tail:{nil:!0}}})});it("707_707__::__            iterate (\u03bbx = x + 1) 0 |> take 100 |> to_list |> length == 100",function(){expect(function(a){return function(b){return b(a)}}(function(a){return function(b){return b(a)}}(function(a){return function(b){return b(a)}}(a(function(a){return run(function(){return run(function(){return a+
1})})})(0))(d(100)))(c))(e)).toEqual(100)});it('743_747multi__::__            do! fast_time <- time yield fast_fib 30\n                slow_time <- time yield fibs |> take 30 |> to_list |> last\n                let ratio = floor (fast_time / slow_time * 100)\n                "#speedtest" $= ratio\n                return (ratio >= 2)',function(){expect(function(){try{return run(function(){var a=run,b=p(function(){return f(30)}),e=run(b),b=p(function(){var a=g,a=d(30)(a),a=c(a);return i(a)}),m,l,j=
run(b);l=run(function(){return run(function(){return e/j})});b=run(function(){return run(function(){return 100*l})});m=q(b);run(function(){if("undefined"!=typeof $){var a;a=$("#speedtest").get(0);"undefined"!=typeof a&&(a.innerHTML=m)}});var h;h=run(function(){return run(function(){return 2<=m})});return a(function(){return h})})}catch(a){return{error:a}}}()).toEqual(!0)});it("749_749__::__            fibs |> take 5 |> to_list == [:1,1,2,3,5]",function(){expect(function(a){return function(b){return b(a)}}(function(a){return function(b){return b(a)}}(g)(d(5)))(c)).toEqual({head:1,
tail:{head:1,tail:{head:2,tail:{head:3,tail:{head:5,tail:{nil:!0}}}}}})});it("751_753multi__::__            fast_fib 15 == fibs |> take 15\n                                |> to_list\n                                |> last",function(){expect(f(15)).toEqual(function(a){return function(b){return b(a)}}(function(a){return function(b){return b(a)}}(function(a){return function(b){return b(a)}}(g)(d(15)))(c))(i))})}});describe("Formal Z",function(){var a;a=h._comp_comp||window._comp_comp;var b;b=h.concat_map||
window.concat_map;new function(){it("798_801multi__::__            let (>>>=) x g = concat_map g x\n                z = 1 .. 3 >>>= \u03bbx = [:x, x + 1, x + 2]\n    \n            z == [:1,2,3,2,3,4,3,4,5]",function(){expect(function(){try{var c,d=a(1)(3);c=b(function(a){var b=run(function(){return run(function(){return a+1})}),c;c=run(function(){return run(function(){return a+2})});return{head:a,tail:{head:b,tail:{head:c,tail:{nil:!0}}}}})(d);return e(c)({head:1,tail:{head:2,tail:{head:3,tail:{head:2,
tail:{head:3,tail:{head:4,tail:{head:3,tail:{head:4,tail:{head:5,tail:{nil:!0}}}}}}}}}})}catch(g){return{error:g}}}()).toEqual(!0)})}})}})});
describe("",function(){describe("readme",function(){var f;f=readme.fib_apos;var e;e=readme.person;var k;k=readme.point;var j;j=readme.magnitude;var n;n=readme.map_excl;var r;r=readme.hello_world;var h;h=readme.maybe;var a;a=readme.has_value;var b;b=prelude._eq_eq||window._eq_eq;var c;c=prelude.length||window.length;c=prelude.length||window.length;c=prelude.string.length||window.length;f=readme.fib_apos;e=readme.person;k=readme.point;j=readme.magnitude;n=readme.map_excl;r=readme.hello_world;h=readme.maybe;
a=readme.has_value;new function(){it("146_146__::__        fib' 7 == 13",function(){expect(f(7)).toEqual(13)});it("147_147__::__        fib' 0 == 0",function(){expect(f(0)).toEqual(0)});it('158_158__::__        person("Andrew", "123 Fake St.").message is "Andrew lives at 123 Fake St."',function(){expect(e("Andrew")("123 Fake St.").message).toEqual("Andrew lives at 123 Fake St.")});it("162_162__::__        20 == point.x + point.y",function(){expect(20).toEqual(function(a){return function(b){return run(function(){return run(function(){return a+
b})})}}(k.x)(k.y))});it('168_168__::__        magnitude {x: 3, y: 4, other: "test"} == 5',function(){expect(j({other:"test",x:3,y:4})).toEqual(5)});it('169_169__::__        magnitude {x: 4, y: 3, test: "other"} == 5',function(){expect(j({test:"other",x:4,y:3})).toEqual(5)});it('188_188__::__        "hello" ** 3 == "hellohellohello"',function(){expect(function(a){return function(b){var c;c=void 0;var e;e=a;var f;f=b;var h;for(h="";"undefined"==typeof c;)(function(){var a;a=h;if(0===f)c=a;else{var b;
b=e;var d;d=f;a=h;e=b;f=run(function(){return run(function(){return d-1})});var g=a;h=run(function(){return run(function(){return""+g+b})});c=void 0}})();return c}}("hello")(3)).toEqual("hellohellohello")});it('189_189__::__        length ("a" ** 10000) == 10000',function(){expect(c(function(a){return function(b){var c;c=void 0;var e;e=a;var f;f=b;var h;for(h="";"undefined"==typeof c;)(function(){var a;a=h;if(0===f)c=a;else{var b;b=e;var d;d=f;a=h;e=b;f=run(function(){return run(function(){return d-
1})});var g=a;h=run(function(){return run(function(){return""+g+b})});c=void 0}})();return c}}("a")(1E4))).toEqual(1E4)});it("199_202multi__::__        let fil = \u03bb x when x > 5 = x\n                  | x            = 5\n    \n        map! fil [2, 6, 3, 7] is [5, 6, 5, 7]",function(){expect(function(){try{return b(n(function(a){var b,c=b=a;if(run(function(){return run(function(){return 5<c})}))return b;b=a;return 5})([2,6,3,7]))([5,6,5,7])}catch(a){return{error:a}}}()).toEqual(!0)});it("220_220__::__        8 == do! hello_world >>= \u03bbx = `x + 3`",
function(){expect(8).toEqual(run(function(){var a=run,b=run(r);return a(function(){return b+3})}))});it("234_237multi__::__        let x = 0\n            test = lazy do! `x = x + 1; x`\n    \n        in  1 == do! test >> test >> test >> test",function(){expect(function(){try{var a;a=0;var c,e;e=void 0;c=function(){e||(e=run(function(){return run(function(){return a+=1})}));return e};return b(1)(run(function(){var a=run,b;b=function(){run(c);return run(c)};var d;d=function(){run(b);return run(c)};
return a(function(){run(d);return run(c)})}))}catch(f){return{error:f}}}()).toEqual(!0)});it("267_267__::__        maybe 3 {just: 4} == 4",function(){expect(h(3)({just:4})).toEqual(4)});it("268_268__::__        maybe 3 {nothing} == 3",function(){expect(h(3)({nothing:!0})).toEqual(3)});it("277_277__::__        has_value {just: 4}",function(){expect(function(){try{return a({just:4})}catch(b){return{error:b}}}()).toEqual(!0)});it("278_278__::__        not (has_value {nothing})",function(){expect(function(){try{var b;
var c=a({nothing:!0});b=run(function(){return run(function(){return!c})});return b}catch(e){return{error:e}}}()).toEqual(!0)})}})});
</script><p>Formal is an modern programming language for the discriminating programmer. More importantly, formal is my vanity project, an attempt to learn ML by writing one.</p>
<h2 id="philosophy">Philosophy</h2>
<ol style="list-style-type: decimal">
<li><p>Writing software is unnecessarily hard, because the language's syntax treats the programmer like a machine. A modern programming language should be read and written for programmers - a philosophy lifted unapologetically from <a href="http://www.artima.com/intv/ruby4.html">Ruby</a>.</p></li>
<li><p>Writing software is unnecessarily hard, because the language lets the programmer make mistakes. A modern programming language should prevent the programmer from writing incorrect code, in so far as it never conflicts with #1.</p></li>
</ol>
<h2 id="features">Features</h2>
<ul>
<li><p>Buzzwords: functional, strict, expressive, pure(ish), static(y), inferred, fast, fun. Strong like a gorilla, yet soft and yielding like a Nerf ball.</p></li>
<li><p>Targets Javascript, but please regard this as an implementation detail - formal is not intended as an answer to &quot;the Javascript problem.&quot; Simple foreign function interface, which allows the introduction of untyped values for quick &amp; dirty code integration, which can later be restricted via explicit typing.</p></li>
<li><p>Type system which is designed to be simple and catch obvious errors, not entirely exhaustive, dictatorial and somewhat combative (I'm looking at you, Haskell). Strucural types, partials records, arbitrary unions, ability to introduce unrestricted types via FFI.</p></li>
<li><p>Sugary, flexible syntax.</p></li>
<li><p>Inline testing, compiles to a separate suite.</p></li>
<li><p>Fast. Automatic tail call optimization, inline functions, designed for use with <a href="https://developers.google.com/closure/">Google Closure Compiler</a> advanced optimizations mode.</p></li>
<li><p>Heavily inspired by <a href="http://www.haskell.org/haskellwiki/Haskell">Haskell</a> , <a href="http://msdn.microsoft.com/en-us/vstudio/hh388569.aspx">F#</a> , <a href="http://coffeescript.org/">Coffeescript</a>. , (<a href="http://en.wikipedia.org/wiki/Category:ML_programming_language_family">_</a>)(<a href="http://www.smlnj.org/">S</a>)(<a href="http://caml.inria.fr/">OCA</a>)ML , <a href="http://clojure.org/">Clojure</a> , <a href="http://www.haskell.org/haskellwiki/Jmacro">JMacro</a> , <a href="http://www.ruby-lang.org/en/">Ruby</a></p></li>
</ul>
<h2 id="installation">Installation</h2>
<p>Mac OSX (tested on Snow Leopard &amp; Lion). Note that Formal also requires <a href="https://developers.google.com/closure/">Closure</a>for optimizations and either <a href="http://phantomjs.org">Phantom.js</a> or <a href="http://nodejs.org">Node.js</a></p>
<p>Install the <a href="http://hackage.haskell.org/platform/index.html">Haskell Platform</a>, then</p>
<pre><code>--$ cabal install formal</pre>
</code>
<p>To compile some formal files:</p>
<pre><code>--$ formal -o app test.formal test2.formal</pre>
</code>
<p>will create an app.js and app.spec.js with the compiled code and test suite respectively.</p>
<p>Formal will by default try to minify/optimize your code with Closure, via the $CLOSURE environment variable, which should point to the closure jar. Failing this, formal will attempt to post your code to the Closure web service.</p>
<p>Additionally, formal will attempt to run the test suite with the phantomjs binary, which it expects to find on your PATH. You may optionally specifiy to run your suite via node.js with</p>
<pre><code>--$ formal -node-test test.formal</pre>
</code>
<p>To compile literate formal (eg, Formal code embedded in Markdown):</p>
<pre><code>--$ formal test.lformal</pre>
</code>
<p>To see the inferred types:</p>
<pre><code>--$ formal -t test.formal</pre>
</code>
<p>To turn off optimizing (eg, Closure) or testing:</p>
<pre><code>--$ formal -no-test -no-opt test.formal</pre>
</code>
<p>To watch a file for changes and incrementally compile:</p>
<pre><code>--$ formal -w test.formal</pre>
</code>
<p>To generate an HTML (like this one!) and test suite:</p>
<pre><code>--$ formal -docs test.formal</pre>
</code>
<h2 id="tutorial">Tutorial</h2>
<p>This is unfortunately not comprehensive, and presumes some working knowledge of ML or Haskell. For more examples, see the annotated <a href="http://texodus.github.com/formal/prelude">prelude</a> and <a href="http://texodus.github.com/formal.parsec.html">parsec</a>.</p>
<p>Formal supports a flexible, forgiving syntax that supports many synonymous forms. This will be illustrated by adherring to an entirely random, arbitrary style throughout.</p>
<p>All formal programs must reside in a module. Within a module, the compiler recognizes logical sections divided by <code>open</code> statements and sub modules. Within a section, declarations can be in any order.</p>
<pre><code>module readme

    open prelude
    open prelude.string</code></pre>
<p>Simple function. Formal allows functions to be written in ML style, or in more traditional java style.</p>
<pre><code>    square x = x * x

    add(x, y) = x + y</code></pre>
<p>With pattern matching</p>
<pre><code>    fib 0 = 0 | 1 = 1 | n = fib (n - 1) + fib (n - 2)</code></pre>
<p>Patterns can be separated with <code>|</code>, or by repeating the definition's name ala Haskell. Definitions can have optional type annotations and assertions (which are compiled separately from your application code).</p>
<pre><code>    private

    fib&#39; : Num -&gt; Num

    fib&#39; 0 = 0
    fib&#39; 1 = 1
    fib&#39; n = fib&#39; (n - 1) + fib&#39; (n - 2)

    <span class='test' id='test_146_146'>fib&#39; 7 == 13</span>
    <span class='test' id='test_147_147'>fib&#39; 0 == 0</span></code></pre>
<p>Formal has the basic primative types from Javascript: Num, String, Bool; plus a record, which is structurally typed and implemented as a simple Javascript object.</p>
<pre><code>    person name address = { 
        name    = name
        address = address
        message = &quot;`name` lives at `address`&quot;
    }

    <span class='test' id='test_158_158'>person(&quot;Andrew&quot;, &quot;123 Fake St.&quot;).message is &quot;Andrew lives at 123 Fake St.&quot;</span>

    point = {x: 10, y: 10}

    <span class='test' id='test_162_162'>20 == point.x + point.y</span></code></pre>
<p>Also supports partial records.</p>
<pre><code>    magnitude {x: x, y: y, _} = sqrt (square x + square y)

    <span class='test' id='test_168_168'>magnitude {x: 3, y: 4, other: &quot;test&quot;} == 5</span>
    <span class='test' id='test_169_169'>magnitude {x: 4, y: 3, test: &quot;other&quot;} == 5</span></code></pre>
<p>Operators can be defined much like in Haskell. Precedence is currently fixed, though you can declare right associative operators by ending them with a <code>:</code>. For performance, you can declare functions to be <code>inline</code>. This example will compile to a loop, as it is tail recursive.</p>
<pre><code>    inline (**): 

         String -&gt; Num -&gt; String
         text   ** n    =

             var f(_, 0, acc) = acc       -- `let` and `var` are synonyms
                 f(text, n, acc) =
                     f(text, n - 1, acc +++ text)

             in f(text, n, &quot;&quot;)            -- `in` is optional


    <span class='test' id='test_188_188'>&quot;hello&quot; ** 3 == &quot;hellohellohello&quot;</span>
    <span class='test' id='test_189_189'>length (&quot;a&quot; ** 10000) == 10000</span></code></pre>
<p>Anonymous functions also follow Haskell, can be written with <code>\</code> or <code>&#955;</code>, and allows pattern seperation via <code>|</code></p>
<p>Note this function mutates its argument, so we name it with an exclamation.</p>
<pre><code>    map!: (a -&gt; b) -&gt; Array a -&gt; Array b
    map! f xs = do! `xs.map(f)`

    <span class='test' id='test_199_202multi'>let fil = &#955; x when x &gt; 5 = x
              | x            = 5

    map! fil [2, 6, 3, 7] is [5, 6, 5, 7]</span></code></pre>
<h2 id="interop-side-effects">Interop / Side Effects</h2>
<p>Formal technically allows unrestricted side effects, but by default wraps them in a <code>JS a</code> type, which can be composed with the <code>&gt;&gt;=</code> and <code>&gt;&gt;</code> operators, or a variation of Haskell's <code>do</code> notation.</p>
<pre><code>    hello_world = do

        `console.log(&quot;Hello World&quot;)` -- Calls to Javascript always return type `JS a`
        x &lt;- `Math.sqrt(9)`          -- `x` is inferred to be the unrestricted type `a`
        let z = x + 1                -- `x` is now restricted to type `Num`
        return (z + 1)               -- type of `hello_world` is inferred to be `JS Num`

    <span class='test' id='test_220_220'>8 == do! hello_world &gt;&gt;= &#955;x = `x + 3`</span></code></pre>
<p>Though this function is inferred to be <code>a -&gt; b</code>, you can restrict it with a signature.</p>
<pre><code>    inline
    sqrt: Num -&gt; Num                 
    sqrt x = do! `Math.sqrt(x)`      -- `do!` realizes its argument immediately</code></pre>
<p>Formal also supports additional keywords <code>lazy</code> and <code>yield</code>. Both take expressions as arguments (as opposed to <code>do</code> syntax), but return an unrealized type <code>JS a</code>, the difference being that <code>lazy</code> will only evaluate it's arguments once, then cache the result.</p>
<pre><code>    <span class='test' id='test_234_237multi'>let x = 0
        test = lazy do! `x = x + 1; x`

    in  1 == do! test &gt;&gt; test &gt;&gt; test &gt;&gt; test</span></code></pre>
<h2 id="types-aliases-unions">Types, Aliases &amp; Unions</h2>
<p>Formal lacks algebraic data types in the ML sense, instead opting for only structural typing of records. However, you can add explicit type signatures to tell the Formal compiler it is OK to overload the types of specific symbols.</p>
<pre><code>    num_or_string:

          (Num | String) -&gt; String
        | x when num? x   = &quot;Num&quot;
        | _               = &quot;String&quot;</code></pre>
<p>You can also gives union types such as these an alias, effectively allowing algebraic data types to be declared in a local scope, for all records which are structurally equivalent to those declared. For instance, we could declare a <code>Maybe a</code> ADT in formal via</p>
<pre><code>    Maybe a = {just: a} | {nothing}</code></pre>
<p>... where <code>{nothing}</code> is shorthand for the strucural type <code>{nothing: {}}</code>. Any scope which imports the alias <code>Maybe a</code> will now allow values which can be typed both a <code>{just: a}</code> or <code>{nothing}</code> record</p>
<pre><code>    maybe x {just: y} = y
    maybe x {nothing} = x

    <span class='test' id='test_267_267'>maybe 3 {just: 4} == 4</span>
    <span class='test' id='test_268_268'>maybe 3 {nothing} == 3</span></code></pre>
<p>In case this sort of things floats your boat, you can also declare polymorphic types in &quot;java&quot; style, with <code>&lt; &gt;</code>.</p>
<pre><code>    has_value: Maybe&lt;a&gt; -&gt; Bool
    has_value {just: _} = true
    has_value _ = false

    <span class='test' id='test_277_277'>has_value {just: 4}</span>
    <span class='test' id='test_278_278'>not (has_value {nothing})</span></code></pre>
    <div id="test_suite" style="display: inline"><script>$("code").addClass("prettyprint").addClass("lang-hs");prettyPrint();$('#run_tests').bind('click', prelude.html.table_of_contents)</script>
</div>

</div>
</div>
</body>
 </html>
